function VIEWPORT_EMULATOR(aj,ai,ah,ag,af,ae,ad,ac,ab,aa,Z,Y){function Q(){S(T.get_parameter("pixel_ratio",X)),D(T.get_parameter("url",V)),u(T.get_parameter("scale",/^([0-9]*\.?[0-9]+)$/)),U(T.get_parameter("scrolling",W)),M(),L(),K(),I(),ah.onchange=function(){T.set_parameter("url",this.value),I()},af.onchange=function(){M(),T.set_parameter("scale",this.value)},Z.onchange=function(){L(),T.set_parameter("scrolling",this.checked?"on":"off")},window.onpopstate=function(){P()},window.onpageshow=function(){P()}}function O(e,d){if(!e||!d){return !1}for(var f=e.options.length;f--;){if(d==e.options[f].value){return e.selectedIndex=f,!0}}return !1}function N(b){if(!b){return""}return b}function J(){return 2}function D(b){b=N(b),T.set_parameter("url",b)}function v(b){return O(ag,b)}function u(b){return b||(b=Math.round(1000*(1/J()))/1000),O(af,b)||(aa.value=b)}function U(b){return W.test(b)?(Z.checked="on"==b?!0:!1,void 0):!1}function S(a){if(!X.test(a)){return !1}if(Y.checked=1==a?!0:!1,1!=a&&a!=J()){document.getElementById("device_pixel_ratio").innerHTML=a,R=!0;var f=Math.round(aj.get_native_resolution("x")/a),e=Math.round(aj.get_native_resolution("y")/a);document.getElementById("virtual_resolution").innerHTML=document.getElementById("virtual_resolution").innerHTML.replace(/^[0-9]+( x )[0-9]+([a-zA-Z- ]*)$/,f+"$1"+e+"$2"),document.getElementById("native_resolution_toggle").parentNode.className=""}}function P(){T.has_been_modified_from_external()&&(T.reassert_parameters(["orientation","scale","scrolling","pixel_ratio"]),D(T.get_parameter("url",V)),I())}function M(){var a=af.value;aj.scale(a)}function L(){aj.allow_scrolling(Z.checked)}function K(){aj.change_pixel_ratio(J())}function I(){url=T.get_parameter("url",V),O(ah,url),aj.open_url(url||ah.firstElementChild.value)}var X=/^[0-9]*\.?[0-9]+$/,W=/^(on|off)$/,V=/^([!#$&-;=?-[\]_a-z~]|%[0-9a-fA-F]{2})+$/,T=new QUERY_STING,aj=new VIEWPORT_EMULATOR_DEVICE(aj),R=!1;Q()}function QUERY_STING(){function f(a,g){return g&&"push"==g?history.pushState(null,null,a):history.replaceState(null,null,a),e=location.search,!0}var e=location.search,d={};this.get_parameter=function(b,h){var g=new RegExp("[?&]"+b+"=([^&]*)").exec(location.search),g=g&&h.exec(decodeURIComponent(g[1]));return g&&(d[b]=g[0]),g&&g[0]},this.set_parameter=function(b,h,g){if(this.replace_parameter(b,h,g)){return !0}h=encodeURIComponent(h),d[b]=h;var c=location.href+(/\?/.test(location.href)?"&":"?")+b+"="+h;return f(c,g)},this.replace_parameter=function(b,l,k){if(!l){return this.remove_parameter(b,k)}var j=new RegExp("([?&]"+b+"=)([^&]*)"),i=j.exec(location.search);if(!i){return !1}if(l=encodeURIComponent(l),i[2]==l){return !0}d[b]=l;var c=location.href.replace(j,"$1"+l);return f(c,k)},this.remove_parameter=function(b,j){var i=new RegExp("([?&])"+b+"=[^&]*(&)?"),h=i.exec(location.search);if(!h){return !0}d[b]="";var c=location.href.replace(i,h[2]?"$1":"");return f(c,j)},this.reassert_parameters=function(b){for(var a=b.length;a--;){d.hasOwnProperty(b[a])&&this.set_parameter(b[a],d[b[a]])}e=location.search},this.has_been_modified_from_external=function(){return e!=location.search}}function VIEWPORT_EMULATOR_DEVICE(j){function k(){j.style.width=Math.ceil(i.offsetWidth*l)+"px",j.style.height=Math.ceil(i.offsetHeight*l)+"px"}var i=j.firstElementChild,p=i.firstElementChild,o="portrait",n=p.offsetHeight,m=p.offsetWidth,l=1;this.get_native_resolution=function(b){return"x"==b?n:m},this.get_scale_factor=function(){return l},this.open_url=function(b){var c=document.createElement("iframe");c.className=p.className,c.style.width=p.style.width,c.style.height=p.style.height,c.style.transformOrigin=p.style.transformOrigin,c.style.transform=p.style.transform,c.style.WebkitTransformOrigin=p.style.WebkitTransformOrigin,c.style.WebkitTransform=p.style.WebkitTransform,c.scrolling=p.scrolling,c.src=b,i.replaceChild(c,p),p=c},this.rotate=function(b){if(b!=o){i.className=i.className.replace(o,b),o=b;var c=p.style.width;p.style.width=p.style.height,p.style.height=c,k()}},this.scale=function(b){b=window.devicePixelRatio?b/window.devicePixelRatio:b,i.style.transformOrigin="left top",i.style.transform="scale("+b+")",i.style.WebkitTransformOrigin="left top",i.style.WebkitTransform="scale("+b+")",l=b,k()},this.allow_scrolling=function(b){if(p.scrolling=b?"auto":"no",p.style.overflow=b?"auto":"hidden",navigator.userAgent&&!/firefox/i.test(navigator.userAgent)){var c=p.cloneNode();i.replaceChild(c,p),p=c}},this.change_pixel_ratio=function(d){var c=m,e=n;p.style.width=Math.round(c/d)+"px",p.style.height=Math.round(e/d)+"px",p.style.transformOrigin="left top",p.style.transform="scale("+d+")",p.style.WebkitTransformOrigin="left top",p.style.WebkitTransform="scale("+d+")"}}window.onload=function(){new VIEWPORT_EMULATOR(document.getElementById("device"),document.getElementById("url_input"),document.getElementById("module_selector"),document.getElementById("orientation_selector"),document.getElementById("scale_selector"),document.getElementById("real_scale_options"),document.getElementById("screensize_selector"),document.getElementById("resolution_x_input"),document.getElementById("resolution_y_input"),document.getElementById("scale_factor_input"),document.getElementById("scrolling_toggle"),document.getElementById("native_resolution_toggle"))};