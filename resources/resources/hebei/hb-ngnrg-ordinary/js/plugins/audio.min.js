(function(d,f){var r="",w,g,p,q={Webkit:"webkit",Moz:"",O:"o"},n=window.document,a=n.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,s,k,m,e,j,v,u,b,t={};function c(x){return x.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function h(x){return w?w+x:x.toLowerCase()}d.each(q,function(y,x){if(a.style[y+"TransitionProperty"]!==f){r="-"+y.toLowerCase()+"-";w=x;return false}});l=r+"transform";t[s=r+"transition-property"]=t[k=r+"transition-duration"]=t[e=r+"transition-delay"]=t[m=r+"transition-timing-function"]=t[j=r+"animation-name"]=t[v=r+"animation-duration"]=t[b=r+"animation-delay"]=t[u=r+"animation-timing-function"]="";d.fx={off:(w===f&&a.style.transitionProperty===f),speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")};d.fn.animate=function(y,z,A,B,x){if(d.isFunction(z)){B=z,A=f,z=f}if(d.isFunction(A)){B=A,A=f}if(d.isPlainObject(z)){A=z.easing,B=z.complete,x=z.delay,z=z.duration}if(z){z=(typeof z=="number"?z:(d.fx.speeds[z]||d.fx.speeds._default))/1000}if(x){x=parseFloat(x)/1000}return this.anim(y,z,A,B,x)};d.fn.anim=function(F,A,z,H,B){var G,D={},J,E="",C=this,y,I=d.fx.transitionEnd,x=false;if(A===f){A=d.fx.speeds._default/1000}if(B===f){B=0}if(d.fx.off){A=0}if(typeof F=="string"){D[j]=F;D[v]=A+"s";D[b]=B+"s";D[u]=(z||"linear");I=d.fx.animationEnd}else{J=[];for(G in F){if(o.test(G)){E+=G+"("+F[G]+") "}else{D[G]=F[G],J.push(c(G))}}if(E){D[l]=E,J.push(l)}if(A>0&&typeof F==="object"){D[s]=J.join(", ");D[k]=A+"s";D[e]=B+"s";D[m]=(z||"linear")}}y=function(K){if(typeof K!=="undefined"){if(K.target!==K.currentTarget){return}d(K.target).unbind(I,y)}else{d(this).unbind(I,y)}x=true;d(this).css(t);H&&H.call(this)};if(A>0){this.bind(I,y);setTimeout(function(){if(x){return}y.call(C)},(A*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(D);if(A<=0){setTimeout(function(){C.each(function(){y.call(this)})},0)}return this};a=null})(Zepto);(function(a){a.fn.coffee=function(k){var g=null;var h=null;var l="cubic-bezier(.09,.64,.16,.94)";var f=a(this);var b=a.extend({},a.fn.coffee.defaults,k);var j=b.steamWidth;var o=a('<div class="coffee-steam-box"></div>').css({height:b.steamHeight,width:b.steamWidth,left:60,top:-50,position:"absolute",overflow:"hidden","z-index":0}).appendTo(f);a.fn.coffee.stop=function(){clearInterval(g);clearInterval(h)};a.fn.coffee.start=function(){g=setInterval(function(){e()},n(b.steamInterval/2,b.steamInterval*2));h=setInterval(function(){d()},n(100,1000)+n(1000,3000))};return f;function e(){var x=n(8,b.steamMaxSize);var v=c(1,b.steamsFontFamily);var s="#"+c(6,"0123456789ABCDEF");var u=n(0,44);var t=n(-90,89);var r=m(0.4,1);var p=a.fx.cssPrefix+"transform";p=p+":rotate("+t+"deg) scale("+r+");";var w=a('<span class="coffee-steam">'+c(1,b.steams)+"</span>");var q=n(0,j-b.steamWidth-x);if(q>u){q=n(0,u)}w.css({position:"absolute",left:u,top:b.steamHeight,"font-size:":x+"px",color:s,"font-family":v,display:"block",opacity:1}).attr("style",w.attr("style")+p).appendTo(o).animate({top:n(b.steamHeight/2,0),left:q,opacity:0},n(b.steamFlyTime/2,b.steamFlyTime*1.2),l,function(){w.remove();w=null})}function d(){var p=n(-10,10);p+=parseInt(o.css("left"));if(p>=54){p=54}else{if(p<=34){p=34}}o.animate({left:p},n(1000,3000),l)}function c(s,r){s=s||1;var t="";var q=r.length-1;var p=0;for(i=0;i<s;i++){p=n(0,q-1);t+=r.slice(p,p+1)}return t}function n(q,s){var p=s-q;var r=q+Math.round(Math.random()*p);return parseInt(r)}function m(q,s){var p=s-q;var r=q+Math.random()*p;return parseFloat(r)}};a.fn.coffee.defaults={steams:[],steamsFontFamily:[],steamFlyTime:5000,steamInterval:500,steamMaxSize:30,steamHeight:200,steamWidth:300};a.fn.coffee.version="2.0.0"})(Zepto);(function(a){a.fn.audio=function(r){a.fn.audio.defaults={auto:true,stopMode:"stop",audioUrl:"",steams:[],steamHeight:150,steamWidth:44};var b=a.extend({},a.fn.audio.defaults,r);var g=a(this),j=g.find(".audio-icon"),l=g.find(".audio-txt"),o=g.find(".coffee-flow"),f=b.auto,k=null;var n=function(){g.addClass("zlow")},m=function(){g.removeClass("zlow none")},c=function(){if(g.length==0){return}o.on("click",function(s){s.preventDefault();d()});a(audio).on("play",function(){f=true;e(true);j.addClass("animated");a.fn.coffee.start();g.find(".coffee-steam-box").show(500)}).on("pause",function(){f=false;e(false);a.fn.coffee.stop();j.removeClass("animated");g.find(".coffee-steam-box").hide(500)})},e=function(s){l.text(s?"打开":"关闭");if(k){clearTimeout(k)}l.removeClass("animated hide");k=setTimeout(function(){l.addClass("animated").addClass("hide")},1000)},d=function(){if(f){q()}else{h()}},h=function(){audio&&audio.play()},q=function(){if(audio){audio.pause();if(b.stopMode=="stop"){audio.currentTime=0}}},p=function(){o.coffee({steams:b.steams,steamHeight:b.steamHeight,steamWidth:b.steamWidth});var u={loop:false,preload:"auto",src:b.audioUrl,autoplay:b.auto};audio=new Audio();for(var t in u){if(u.hasOwnProperty(t)&&(t in audio)){audio[t]=u[t]}}audio.load();c();var s=setInterval(function(){if(!audio){return}m();clearInterval(s)},1000)};p();this.stop=function(){if(audio){audio.pause();audio.currentTime=0}};this.pause=function(){if(audio){audio.pause()}};return this}})(Zepto);