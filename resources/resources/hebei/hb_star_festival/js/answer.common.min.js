(function(d,a,c){var f=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(g){d.setTimeout(g,1000/60)};var b=(function(){var l={};var m=a.createElement("div").style;var j=(function(){var q=["t","webkitT","MozT","msT","OT"],o,p=0,n=q.length;for(;p<n;p++){o=q[p]+"ransform";if(o in m){return q[p].substr(0,q[p].length-1)}}return false})();function k(n){if(j===false){return false}if(j===""){return n}return j+n.charAt(0).toUpperCase()+n.substr(1)}l.getTime=Date.now||function g(){return new Date().getTime()};l.extend=function(p,o){for(var n in o){p[n]=o[n]}};l.addEvent=function(q,p,o,n){q.addEventListener(p,o,!!n)};l.removeEvent=function(q,p,o,n){q.removeEventListener(p,o,!!n)};l.prefixPointerEvent=function(n){return d.MSPointerEvent?"MSPointer"+n.charAt(9).toUpperCase()+n.substr(10):n};l.momentum=function(t,p,q,n,u,v){var o=t-p,r=c.abs(o)/q,w,s;v=v===undefined?0.0006:v;w=t+(r*r)/(2*v)*(o<0?-1:1);s=r/v;if(w<n){w=u?n-(u/2.5*(r/8)):n;o=c.abs(w-t);s=o/r}else{if(w>0){w=u?u/2.5*(r/8):0;o=c.abs(t)+w;s=o/r}}return{destination:c.round(w),duration:s}};var h=k("transform");l.extend(l,{hasTransform:h!==false,hasPerspective:k("perspective") in m,hasTouch:"ontouchstart" in d,hasPointer:d.PointerEvent||d.MSPointerEvent,hasTransition:k("transition") in m});l.isBadAndroid=/Android /.test(d.navigator.appVersion)&&!(/Chrome\/\d/.test(d.navigator.appVersion));l.extend(l.style={},{transform:h,transitionTimingFunction:k("transitionTimingFunction"),transitionDuration:k("transitionDuration"),transitionDelay:k("transitionDelay"),transformOrigin:k("transformOrigin")});l.hasClass=function(o,p){var n=new RegExp("(^|\\s)"+p+"(\\s|$)");return n.test(o.className)};l.addClass=function(o,p){if(l.hasClass(o,p)){return}var n=o.className.split(" ");n.push(p);o.className=n.join(" ")};l.removeClass=function(o,p){if(!l.hasClass(o,p)){return}var n=new RegExp("(^|\\s)"+p+"(\\s|$)","g");o.className=o.className.replace(n," ")};l.offset=function(n){var p=-n.offsetLeft,o=-n.offsetTop;while(n=n.offsetParent){p-=n.offsetLeft;o-=n.offsetTop}return{left:p,top:o}};l.preventDefaultException=function(p,o){for(var n in o){if(o[n].test(p[n])){return true}}return false};l.extend(l.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});l.extend(l.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return c.sqrt(1-(--n*n))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(o){var n=4;return(o=o-1)*o*((n+1)*o+n)+1}},bounce:{style:"",fn:function(n){if((n/=1)<(1/2.75)){return 7.5625*n*n}else{if(n<(2/2.75)){return 7.5625*(n-=(1.5/2.75))*n+0.75}else{if(n<(2.5/2.75)){return 7.5625*(n-=(2.25/2.75))*n+0.9375}else{return 7.5625*(n-=(2.625/2.75))*n+0.984375}}}}},elastic:{style:"",fn:function(n){var o=0.22,p=0.4;if(n===0){return 0}if(n==1){return 1}return(p*c.pow(2,-10*n)*c.sin((n-o/4)*(2*c.PI)/o)+1)}}});l.tap=function(p,n){var o=a.createEvent("Event");o.initEvent(n,true,true);o.pageX=p.pageX;o.pageY=p.pageY;p.target.dispatchEvent(o)};l.click=function(p){var o=p.target,n;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(o.tagName)){n=a.createEvent("MouseEvents");n.initMouseEvent("click",true,true,p.view,1,o.screenX,o.screenY,o.clientX,o.clientY,p.ctrlKey,p.altKey,p.shiftKey,p.metaKey,0,null);n._constructed=true;o.dispatchEvent(n)}};return l})();function e(j,g){this.wrapper=typeof j=="string"?a.querySelector(j):j;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var h in g){this.options[h]=g[h]}this.translateZ=this.options.HWCompositing&&b.hasPerspective?" translateZ(0)":"";this.options.useTransition=b.hasTransition&&this.options.useTransition;this.options.useTransform=b.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?b.ease[this.options.bounceEasing]||b.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}e.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(g){if(g.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(h){if(b.eventType[h.type]!=1){if(h.button!==0){return}}if(!this.enabled||(this.initiated&&b.eventType[h.type]!==this.initiated)){return}if(this.options.preventDefault&&!b.isBadAndroid&&!b.preventDefaultException(h.target,this.options.preventDefaultException)){h.preventDefault()}var g=h.touches?h.touches[0]:h,j;this.initiated=b.eventType[h.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=b.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;j=this.getComputedPosition();this._translate(c.round(j.x),c.round(j.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=g.pageX;this.pointY=g.pageY;this._execEvent("beforeScrollStart")},_move:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault){m.preventDefault()}var o=m.touches?m.touches[0]:m,j=o.pageX-this.pointX,h=o.pageY-this.pointY,n=b.getTime(),g,p,l,k;this.pointX=o.pageX;this.pointY=o.pageY;this.distX+=j;this.distY+=h;l=c.abs(this.distX);k=c.abs(this.distY);if(n-this.endTime>300&&(l<10&&k<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(l>k+this.options.directionLockThreshold){this.directionLocked="h"}else{if(k>=l+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){m.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}h=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){m.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}j=0}}j=this.hasHorizontalScroll?j:0;h=this.hasVerticalScroll?h:0;g=this.x+j;p=this.y+h;if(g>0||g<this.maxScrollX){g=this.options.bounce?this.x+j/3:g>0?0:this.maxScrollX}if(p>0||p<this.maxScrollY){p=this.options.bounce?this.y+h/3:p>0?0:this.maxScrollY}this.directionX=j>0?-1:j<0?1:0;this.directionY=h>0?-1:h<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(g,p);if(n-this.startTime>300){this.startTime=n;this.startX=this.x;this.startY=this.y}},_end:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault&&!b.preventDefaultException(m.target,this.options.preventDefaultException)){m.preventDefault()}var o=m.changedTouches?m.changedTouches[0]:m,j,h,l=b.getTime()-this.startTime,g=c.round(this.x),r=c.round(this.y),q=c.abs(g-this.startX),p=c.abs(r-this.startY),k=0,n="";this.isInTransition=0;this.initiated=0;this.endTime=b.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(g,r);if(!this.moved){if(this.options.tap){b.tap(m,this.options.tap)}if(this.options.click){b.click(m)}this._execEvent("scrollCancel");return}if(this._events.flick&&l<200&&q<100&&p<100){this._execEvent("flick");return}if(this.options.momentum&&l<300){j=this.hasHorizontalScroll?b.momentum(this.x,this.startX,l,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:g,duration:0};h=this.hasVerticalScroll?b.momentum(this.y,this.startY,l,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0};g=j.destination;r=h.destination;k=c.max(j.duration,h.duration);this.isInTransition=1}if(g!=this.x||r!=this.y){if(g>0||g<this.maxScrollX||r>0||r<this.maxScrollY){n=b.ease.quadratic}this.scrollTo(g,r,k,n);return}this._execEvent("scrollEnd")},_resize:function(){var g=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){g.refresh()},this.options.resizePolling)},resetPosition:function(h){var g=this.x,j=this.y;h=h||0;if(!this.hasHorizontalScroll||this.x>0){g=0}else{if(this.x<this.maxScrollX){g=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){j=0}else{if(this.y<this.maxScrollY){j=this.maxScrollY}}if(g==this.x&&j==this.y){return false}this.scrollTo(g,j,h,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var g=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=b.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(h,g){if(!this._events[h]){this._events[h]=[]}this._events[h].push(g)},off:function(j,h){if(!this._events[j]){return}var g=this._events[j].indexOf(h);if(g>-1){this._events[j].splice(g,1)}},_execEvent:function(j){if(!this._events[j]){return}var h=0,g=this._events[j].length;if(!g){return}for(;h<g;h++){this._events[j][h].apply(this,[].slice.call(arguments,1))}},scrollBy:function(g,k,h,j){g=this.x+g;k=this.y+k;h=h||0;this.scrollTo(g,k,h,j)},scrollTo:function(g,k,h,j){j=j||b.ease.circular;this.isInTransition=this.options.useTransition&&h>0;if(!h||(this.options.useTransition&&j.style)){this._transitionTimingFunction(j.style);this._transitionTime(h);this._translate(g,k)}else{this._animate(g,k,h,j.fn)}},scrollToElement:function(h,j,g,m,l){h=h.nodeType?h:this.scroller.querySelector(h);if(!h){return}var k=b.offset(h);k.left-=this.wrapperOffset.left;k.top-=this.wrapperOffset.top;if(g===true){g=c.round(h.offsetWidth/2-this.wrapper.offsetWidth/2)}if(m===true){m=c.round(h.offsetHeight/2-this.wrapper.offsetHeight/2)}k.left-=g||0;k.top-=m||0;k.left=k.left>0?0:k.left<this.maxScrollX?this.maxScrollX:k.left;k.top=k.top>0?0:k.top<this.maxScrollY?this.maxScrollY:k.top;j=j===undefined||j===null||j==="auto"?c.max(c.abs(this.x-k.left),c.abs(this.y-k.top)):j;this.scrollTo(k.left,k.top,j,l)},_transitionTime:function(g){g=g||0;this.scrollerStyle[b.style.transitionDuration]=g+"ms";if(!g&&b.isBadAndroid){this.scrollerStyle[b.style.transitionDuration]="0.001s"}},_transitionTimingFunction:function(g){this.scrollerStyle[b.style.transitionTimingFunction]=g},_translate:function(g,h){if(this.options.useTransform){this.scrollerStyle[b.style.transform]="translate("+g+"px,"+h+"px)"+this.translateZ}else{g=c.round(g);h=c.round(h);this.scrollerStyle.left=g+"px";this.scrollerStyle.top=h+"px"}this.x=g;this.y=h},_initEvents:function(g){var h=g?b.removeEvent:b.addEvent,j=this.options.bindToWrapper?this.wrapper:d;h(d,"orientationchange",this);h(d,"resize",this);if(this.options.click){h(this.wrapper,"click",this,true)}if(!this.options.disableMouse){h(this.wrapper,"mousedown",this);h(j,"mousemove",this);h(j,"mousecancel",this);h(j,"mouseup",this)}if(b.hasPointer&&!this.options.disablePointer){h(this.wrapper,b.prefixPointerEvent("pointerdown"),this);h(j,b.prefixPointerEvent("pointermove"),this);h(j,b.prefixPointerEvent("pointercancel"),this);h(j,b.prefixPointerEvent("pointerup"),this)}if(b.hasTouch&&!this.options.disableTouch){h(this.wrapper,"touchstart",this);h(j,"touchmove",this);h(j,"touchcancel",this);h(j,"touchend",this)}h(this.scroller,"transitionend",this);h(this.scroller,"webkitTransitionEnd",this);h(this.scroller,"oTransitionEnd",this);h(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var h=d.getComputedStyle(this.scroller,null),g,j;if(this.options.useTransform){h=h[b.style.transform].split(")")[0].split(", ");g=+(h[12]||h[4]);j=+(h[13]||h[5])}else{g=+h.left.replace(/[^-\d.]/g,"");j=+h.top.replace(/[^-\d.]/g,"")}return{x:g,y:j}},_animate:function(q,p,k,g){var n=this,m=this.x,l=this.y,h=b.getTime(),o=h+k;function j(){var r=b.getTime(),t,s,u;if(r>=o){n.isAnimating=false;n._translate(q,p);if(!n.resetPosition(n.options.bounceTime)){n._execEvent("scrollEnd")}return}r=(r-h)/k;u=g(r);t=(q-m)*u+m;s=(p-l)*u+l;n._translate(t,s);if(n.isAnimating){f(j)}}this.isAnimating=true;j()},handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(g);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(g);break;case"keydown":this._key(g);break;case"click":if(!g._constructed){g.preventDefault();g.stopPropagation()}break}}};e.utils=b;if(typeof module!="undefined"&&module.exports){module.exports=e}else{d.IScroll=e}})(window,document,Math);(function(){window.appendMsgTimer=100;window.maxCache=50;window.maxMsgLength=10;window.CACHESEND=[];window.CACHEMSG=[];window.CACHEMSGINDEX=0;$.fn.barrage=function(a){var j={fontSize:[16,18,24],fontColor:["FF0000","FFC600","19AE00","FFCD02"],padding:10,heightOffset:10,itemHeight:26,leftRange:40,maxLeftWidth:2000,heightPre:80,speed:80};var e=this,g="msg-index",c=width=e.width(),h=height=e.height(),f=0,d=j.fontSize.length,b=j.fontColor.length;$.extend({},j,a);this.getLastLeft=function(){var k=$("#"+g+f);if(k.length!=0){k.removeAttr("id");var l=k.offset().left+k.width();return(l>0&&l<width)?null:l}return null};this.appendMsg=function(m){if(!m){return}var o=this.getLastLeft()||width,n=$("<div>").attr("id",g+f);n.addClass("comment_item");if(o>j.maxLeftWidth){o=o%j.maxLeftWidth+width}n.html(m);n.css({"white-space":"nowrap",position:"absolute",display:"block","-webkit-transform":"translateX("+(o+40)+"px)",top:(height-h+j.itemHeight)+"px",height:"22px","line-height":"22px",fontSize:"13px",color:"#fff","border-radius":"3px",padding:"0 5px 0 8px"});n.find("img").css({width:"26px",height:"30px",position:"absolute",left:"-25px",top:"-5px",overflow:"hidden"});h=h-j.itemHeight-j.heightOffset;f++;if(h<=j.heightPre){h=height;f=0}n.appendTo(this);var p=n.width();var r=this;var s=r.duration(p+o);var l="s_"+g+f+parseInt(Math.random()*1000);var t="pass_barrage"+f+parseInt(Math.random()*1000);var k=$('<style style="display:none" id='+l+"></style>");var q=[];q.push("."+t+" {");q.push("-webkit-animation-name: "+t+"_a;");q.push("-webkit-animation-duration: "+(s/1000)+"s;");q.push("-webkit-animation-timing-function: "+(parseInt(Math.random()*10)%2==0?"linear":"ease")+";");q.push("-webkit-animation-iteration-count: 1;");q.push("}");q.push(" @-webkit-keyframes "+t+"_a {");q.push(" 100% {");q.push(" -webkit-transform:translateX("+(0-p)+"px);");q.push(" }");q.push("}");k[0].innerHTML=q.join("");$("head").append(k);n.addClass(t);(function(u,v,w){setTimeout(function(){u.hide();u.remove();w.remove()},v)})(n,s,k)};this.randSize=function(){return j.fontSize[Math.floor(Math.random()*d)]};this.randColor=function(){return j.fontColor[Math.floor(Math.random()*b)]};this.duration=function(k){return k/j.speed*1000};this.pushMsg=function(k){if(window.CACHESEND.length<window.maxCache){window.CACHESEND.push(k)}else{window.CACHESEND[Math.floor(Math.random()*1000)%window.maxCache]=k}if(window.CACHEMSG.length<window.maxCache){window.CACHEMSG.push(k)}else{window.CACHEMSG[Math.floor(Math.random()*1000)%window.maxCache]=k}};this.start=function(k){$.appendMsg4Cache();if(k!=0){$.appendMsg4Data()}};return this};$.appendMsg4Cache=function(){setTimeout(function(){if(window.CACHESEND.length>0&&barrage.find("div").length<window.maxMsgLength){barrage.appendMsg(window.CACHESEND.pop())}$.appendMsg4Cache()},window.appendMsgTimer)};$.appendMsg4Data=function(){setTimeout(function(){var a=window.CACHEMSG.length;window.CACHEMSGINDEX=window.CACHEMSGINDEX%a;if(barrage.find("div").length<Math.min(a,window.maxMsgLength)){window.CACHESEND.push(window.CACHEMSG[window.CACHEMSGINDEX++])}$.appendMsg4Data()},70)}})();(function(d,f){var r="",w,g,p,q={Webkit:"webkit",Moz:"",O:"o"},n=window.document,a=n.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,s,k,m,e,j,v,u,b,t={};function c(x){return x.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function h(x){return w?w+x:x.toLowerCase()}d.each(q,function(y,x){if(a.style[y+"TransitionProperty"]!==f){r="-"+y.toLowerCase()+"-";w=x;return false}});l=r+"transform";t[s=r+"transition-property"]=t[k=r+"transition-duration"]=t[e=r+"transition-delay"]=t[m=r+"transition-timing-function"]=t[j=r+"animation-name"]=t[v=r+"animation-duration"]=t[b=r+"animation-delay"]=t[u=r+"animation-timing-function"]="";d.fx={off:(w===f&&a.style.transitionProperty===f),speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")};d.fn.animate=function(y,z,A,B,x){if(d.isFunction(z)){B=z,A=f,z=f}if(d.isFunction(A)){B=A,A=f}if(d.isPlainObject(z)){A=z.easing,B=z.complete,x=z.delay,z=z.duration}if(z){z=(typeof z=="number"?z:(d.fx.speeds[z]||d.fx.speeds._default))/1000}if(x){x=parseFloat(x)/1000}return this.anim(y,z,A,B,x)};d.fn.anim=function(F,A,z,H,B){var G,D={},J,E="",C=this,y,I=d.fx.transitionEnd,x=false;if(A===f){A=d.fx.speeds._default/1000}if(B===f){B=0}if(d.fx.off){A=0}if(typeof F=="string"){D[j]=F;D[v]=A+"s";D[b]=B+"s";D[u]=(z||"linear");I=d.fx.animationEnd}else{J=[];for(G in F){if(o.test(G)){E+=G+"("+F[G]+") "}else{D[G]=F[G],J.push(c(G))}}if(E){D[l]=E,J.push(l)}if(A>0&&typeof F==="object"){D[s]=J.join(", ");D[k]=A+"s";D[e]=B+"s";D[m]=(z||"linear")}}y=function(K){if(typeof K!=="undefined"){if(K.target!==K.currentTarget){return}d(K.target).unbind(I,y)}else{d(this).unbind(I,y)}x=true;d(this).css(t);H&&H.call(this)};if(A>0){this.bind(I,y);setTimeout(function(){if(x){return}y.call(C)},(A*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(D);if(A<=0){setTimeout(function(){C.each(function(){y.call(this)})},0)}return this};a=null})(Zepto);(function(a){a.fn.coffee=function(k){var g=null;var h=null;var l="cubic-bezier(.09,.64,.16,.94)";var f=a(this);var b=a.extend({},a.fn.coffee.defaults,k);var j=b.steamWidth;var o=a('<div class="coffee-steam-box"></div>').css({height:b.steamHeight,width:b.steamWidth,left:60,top:-50,position:"absolute",overflow:"hidden","z-index":0}).appendTo(f);a.fn.coffee.stop=function(){clearInterval(g);clearInterval(h)};a.fn.coffee.start=function(){g=setInterval(function(){e()},n(b.steamInterval/2,b.steamInterval*2));h=setInterval(function(){d()},n(100,1000)+n(1000,3000))};return f;function e(){var x=n(8,b.steamMaxSize);var v=c(1,b.steamsFontFamily);var s="#"+c(6,"0123456789ABCDEF");var u=n(0,44);var t=n(-90,89);var r=m(0.4,1);var p=a.fx.cssPrefix+"transform";p=p+":rotate("+t+"deg) scale("+r+");";var w=a('<span class="coffee-steam">'+c(1,b.steams)+"</span>");var q=n(0,j-b.steamWidth-x);if(q>u){q=n(0,u)}w.css({position:"absolute",left:u,top:b.steamHeight,"font-size:":x+"px",color:s,"font-family":v,display:"block",opacity:1}).attr("style",w.attr("style")+p).appendTo(o).animate({top:n(b.steamHeight/2,0),left:q,opacity:0},n(b.steamFlyTime/2,b.steamFlyTime*1.2),l,function(){w.remove();w=null})}function d(){var p=n(-10,10);p+=parseInt(o.css("left"));if(p>=54){p=54}else{if(p<=34){p=34}}o.animate({left:p},n(1000,3000),l)}function c(s,r){s=s||1;var t="";var q=r.length-1;var p=0;for(i=0;i<s;i++){p=n(0,q-1);t+=r.slice(p,p+1)}return t}function n(q,s){var p=s-q;var r=q+Math.round(Math.random()*p);return parseInt(r)}function m(q,s){var p=s-q;var r=q+Math.random()*p;return parseFloat(r)}};a.fn.coffee.defaults={steams:[],steamsFontFamily:[],steamFlyTime:5000,steamInterval:500,steamMaxSize:30,steamHeight:200,steamWidth:300};a.fn.coffee.version="2.0.0"})(Zepto);(function(a){a.fn.audio=function(s){a.fn.audio.defaults={auto:true,stopMode:"stop",audioUrl:"",steams:[],steamHeight:150,steamWidth:44};var b=a.extend({},a.fn.audio.defaults,s);var g=a(this),j=g.find(".audio-icon"),m=g.find(".audio-txt"),p=g.find(".coffee-flow"),l=g.find("label"),f=b.auto,k=null;var o=function(){g.addClass("zlow")},n=function(){g.removeClass("zlow none")},c=function(){if(g.length==0){return}p.on("click",function(t){t.preventDefault();d()});a(audio).on("play",function(){f=true;e(true);a.fn.coffee.start();g.find(".coffee-steam-box").show(500)}).on("pause",function(){f=false;e(false);a.fn.coffee.stop();g.find(".coffee-steam-box").hide(500)})},e=function(t){m.text(t?"打开":"关闭");if(k){clearTimeout(k)}},d=function(){if(f){r()}else{h()}},h=function(){audio&&audio.play()},r=function(){if(audio){audio.pause();if(b.stopMode=="stop"){audio.currentTime=0}}},q=function(){p.coffee({steams:b.steams,steamHeight:b.steamHeight,steamWidth:b.steamWidth});var v={loop:false,preload:"auto",src:b.audioUrl,autoplay:b.auto};audio=new Audio();for(var u in v){if(v.hasOwnProperty(u)&&(u in audio)){audio[u]=v[u]}}audio.load();c();var t=setInterval(function(){if(!audio){return}n();clearInterval(t)},1000);a("#dan-a").click(function(){if(isNaN(audio.duration)||audio.duration==1){setTimeout(function(){l.text(Math.floor(audio.duration)+"``")},1000)}else{l.text(Math.floor(audio.duration)+"``")}})};q();this.stop=function(){if(audio){audio.pause();audio.currentTime=0}};this.pause=function(){if(audio){audio.pause()}};return this}})(Zepto);