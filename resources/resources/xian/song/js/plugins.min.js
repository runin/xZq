var hexcase=0;function hex_md5(b){return rstr2hex(rstr_md5(str2rstr_utf8(b)))}function hex_hmac_md5(d,c){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(d),str2rstr_utf8(c)))}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(b){return binl2rstr(binl_md5(rstr2binl(b),b.length*8))}function rstr_hmac_md5(o,l){var m=rstr2binl(o);if(m.length>16){m=binl_md5(m,o.length*8)}var j=Array(16),n=Array(16);for(var h=0;h<16;h++){j[h]=m[h]^909522486;n[h]=m[h]^1549556828}var k=binl_md5(j.concat(rstr2binl(l)),512+l.length*8);return binl2rstr(binl_md5(n.concat(k),512+128))}function rstr2hex(m){try{hexcase}catch(j){hexcase=0}var k=hexcase?"0123456789ABCDEF":"0123456789abcdef";var e="";var h;for(var l=0;l<m.length;l++){h=m.charCodeAt(l);e+=k.charAt((h>>>4)&15)+k.charAt(h&15)}return e}function str2rstr_utf8(k){var f="";var j=-1;var g,h;while(++j<k.length){g=k.charCodeAt(j);h=j+1<k.length?k.charCodeAt(j+1):0;if(55296<=g&&g<=56319&&56320<=h&&h<=57343){g=65536+((g&1023)<<10)+(h&1023);j++}if(g<=127){f+=String.fromCharCode(g)}else{if(g<=2047){f+=String.fromCharCode(192|((g>>>6)&31),128|(g&63))}else{if(g<=65535){f+=String.fromCharCode(224|((g>>>12)&15),128|((g>>>6)&63),128|(g&63))}else{if(g<=2097151){f+=String.fromCharCode(240|((g>>>18)&7),128|((g>>>12)&63),128|((g>>>6)&63),128|(g&63))}}}}}return f}function rstr2binl(d){var e=Array(d.length>>2);for(var f=0;f<e.length;f++){e[f]=0}for(var f=0;f<d.length*8;f+=8){e[f>>5]|=(d.charCodeAt(f/8)&255)<<(f%32)}return e}function binl2rstr(d){var e="";for(var f=0;f<d.length*32;f+=8){e+=String.fromCharCode((d[f>>5]>>>(f%32))&255)}return e}function binl_md5(a,r){a[r>>5]|=128<<((r)%32);a[(((r+64)>>>9)<<4)+14]=r;var b=1732584193;var c=-271733879;var d=-1732584194;var q=271733878;for(var u=0;u<a.length;u+=16){var s=b;var t=c;var v=d;var w=q;b=md5_ff(b,c,d,q,a[u+0],7,-680876936);q=md5_ff(q,b,c,d,a[u+1],12,-389564586);d=md5_ff(d,q,b,c,a[u+2],17,606105819);c=md5_ff(c,d,q,b,a[u+3],22,-1044525330);b=md5_ff(b,c,d,q,a[u+4],7,-176418897);q=md5_ff(q,b,c,d,a[u+5],12,1200080426);d=md5_ff(d,q,b,c,a[u+6],17,-1473231341);c=md5_ff(c,d,q,b,a[u+7],22,-45705983);b=md5_ff(b,c,d,q,a[u+8],7,1770035416);q=md5_ff(q,b,c,d,a[u+9],12,-1958414417);d=md5_ff(d,q,b,c,a[u+10],17,-42063);c=md5_ff(c,d,q,b,a[u+11],22,-1990404162);b=md5_ff(b,c,d,q,a[u+12],7,1804603682);q=md5_ff(q,b,c,d,a[u+13],12,-40341101);d=md5_ff(d,q,b,c,a[u+14],17,-1502002290);c=md5_ff(c,d,q,b,a[u+15],22,1236535329);b=md5_gg(b,c,d,q,a[u+1],5,-165796510);q=md5_gg(q,b,c,d,a[u+6],9,-1069501632);d=md5_gg(d,q,b,c,a[u+11],14,643717713);c=md5_gg(c,d,q,b,a[u+0],20,-373897302);b=md5_gg(b,c,d,q,a[u+5],5,-701558691);q=md5_gg(q,b,c,d,a[u+10],9,38016083);d=md5_gg(d,q,b,c,a[u+15],14,-660478335);c=md5_gg(c,d,q,b,a[u+4],20,-405537848);b=md5_gg(b,c,d,q,a[u+9],5,568446438);q=md5_gg(q,b,c,d,a[u+14],9,-1019803690);d=md5_gg(d,q,b,c,a[u+3],14,-187363961);c=md5_gg(c,d,q,b,a[u+8],20,1163531501);b=md5_gg(b,c,d,q,a[u+13],5,-1444681467);q=md5_gg(q,b,c,d,a[u+2],9,-51403784);d=md5_gg(d,q,b,c,a[u+7],14,1735328473);c=md5_gg(c,d,q,b,a[u+12],20,-1926607734);b=md5_hh(b,c,d,q,a[u+5],4,-378558);q=md5_hh(q,b,c,d,a[u+8],11,-2022574463);d=md5_hh(d,q,b,c,a[u+11],16,1839030562);c=md5_hh(c,d,q,b,a[u+14],23,-35309556);b=md5_hh(b,c,d,q,a[u+1],4,-1530992060);q=md5_hh(q,b,c,d,a[u+4],11,1272893353);d=md5_hh(d,q,b,c,a[u+7],16,-155497632);c=md5_hh(c,d,q,b,a[u+10],23,-1094730640);b=md5_hh(b,c,d,q,a[u+13],4,681279174);q=md5_hh(q,b,c,d,a[u+0],11,-358537222);d=md5_hh(d,q,b,c,a[u+3],16,-722521979);c=md5_hh(c,d,q,b,a[u+6],23,76029189);b=md5_hh(b,c,d,q,a[u+9],4,-640364487);q=md5_hh(q,b,c,d,a[u+12],11,-421815835);d=md5_hh(d,q,b,c,a[u+15],16,530742520);c=md5_hh(c,d,q,b,a[u+2],23,-995338651);b=md5_ii(b,c,d,q,a[u+0],6,-198630844);q=md5_ii(q,b,c,d,a[u+7],10,1126891415);d=md5_ii(d,q,b,c,a[u+14],15,-1416354905);c=md5_ii(c,d,q,b,a[u+5],21,-57434055);b=md5_ii(b,c,d,q,a[u+12],6,1700485571);q=md5_ii(q,b,c,d,a[u+3],10,-1894986606);d=md5_ii(d,q,b,c,a[u+10],15,-1051523);c=md5_ii(c,d,q,b,a[u+1],21,-2054922799);b=md5_ii(b,c,d,q,a[u+8],6,1873313359);q=md5_ii(q,b,c,d,a[u+15],10,-30611744);d=md5_ii(d,q,b,c,a[u+6],15,-1560198380);c=md5_ii(c,d,q,b,a[u+13],21,1309151649);b=md5_ii(b,c,d,q,a[u+4],6,-145523070);q=md5_ii(q,b,c,d,a[u+11],10,-1120210379);d=md5_ii(d,q,b,c,a[u+2],15,718787259);c=md5_ii(c,d,q,b,a[u+9],21,-343485551);b=safe_add(b,s);c=safe_add(c,t);d=safe_add(d,v);q=safe_add(q,w)}return Array(b,c,d,q)}function md5_cmn(a,k,l,m,b,j){return safe_add(bit_rol(safe_add(safe_add(k,a),safe_add(m,j)),b),l)}function md5_ff(l,m,a,b,n,c,d){return md5_cmn((m&a)|((~m)&b),l,m,n,c,d)}function md5_gg(l,m,a,b,n,c,d){return md5_cmn((m&b)|(a&(~b)),l,m,n,c,d)}function md5_hh(l,m,a,b,n,c,d){return md5_cmn(m^a^b,l,m,n,c,d)}function md5_ii(l,m,a,b,n,c,d){return md5_cmn(a^(m|(~b)),l,m,n,c,d)}function safe_add(f,g){var h=(f&65535)+(g&65535);var e=(f>>16)+(g>>16)+(h>>16);return(e<<16)|(h&65535)}function bit_rol(d,c){return(d<<c)|(d>>>(32-c))}function recordUserLog(e,a,d,c,b){$.ajax({type:"get",async:false,url:domain_url+"userlog",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackDataHandler",data:{openId:e,operateDesc:encodeURIComponent(a),operateDomId:d,loadingTime:c,from:gefrom,flag:b}})}function recordUserOperate(c,a,b){recordUserLog(c,a,b,"","false")}function recordUserPage(c,a,b){recordUserLog(c,a,"",b,"true")}$(function(){recordUserPage(openid,$("title").html(),"");$("body").delegate("*[data-collect='true']","click",function(a){if($(this).attr("data-stoppropagation")=="true"){a.stopPropagation()}recordUserOperate(openid,$(this).attr("data-collect-desc"),$(this).attr("data-collect-flag"))})});(function(c){var d={version:3.5};c.WeixinApi=d;if(typeof define==="function"&&(define.amd||define.cmd)){if(define.amd){define(function(){return d})}else{if(define.cmd){define(function(f,e,g){g.exports=d})}}}var b=function(){var f={},j,g;for(var h=0,e=arguments.length;h<e;h++){j=arguments[h];if(typeof j==="object"){for(g in j){j[g]&&(f[g]=j[g])}}}return f};var a=function(j,h,g){g=g||{};var e=function(k){switch(true){case /\:cancel$/i.test(k.err_msg):g.cancel&&g.cancel(k);break;case /\:(confirm|ok)$/i.test(k.err_msg):g.confirm&&g.confirm(k);break;case /\:fail$/i.test(k.err_msg):default:g.fail&&g.fail(k);break}g.all&&g.all(k)};var f=function(l,k){if(j.menu=="menu:share:timeline"||(j.menu=="menu:general:share"&&k.shareTo=="timeline")){var m=/android/i.test(navigator.userAgent);if(!m){var n=l.title;l.title=l.desc||n;l.desc=n||l.desc}}if(j.menu==="menu:general:share"){if(k.shareTo=="favorite"||k.scene=="favorite"){if(g.favorite===false){return k.generalShare(l,function(){})}}k.generalShare(l,e)}else{WeixinJSBridge.invoke(j.action,l,e)}};WeixinJSBridge.on(j.menu,function(l){g.dataLoaded=g.dataLoaded||new Function();if(g.async&&g.ready){d._wx_loadedCb_=g.dataLoaded;if(d._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){d._wx_loadedCb_=new Function()}g.dataLoaded=function(n){g.__cbkCalled=true;var m=b(h,n);m.img_url=m.imgUrl||m.img_url;delete m.imgUrl;d._wx_loadedCb_(m);f(m,l)};if(!(l&&(l.shareTo=="favorite"||l.scene=="favorite")&&g.favorite===false)){g.ready&&g.ready(l,h);if(!g.__cbkCalled){g.dataLoaded({});g.__cbkCalled=false}}}else{var k=b(h);if(!(l&&(l.shareTo=="favorite"||l.scene=="favorite")&&g.favorite===false)){g.ready&&g.ready(l,k)}f(k,l)}})};d.shareToTimeline=function(f,e){a({menu:"menu:share:timeline",action:"shareTimeline"},{appid:f.appId?f.appId:"",img_url:f.imgUrl,link:f.link,desc:f.desc,title:f.title,img_width:"640",img_height:"640"},e)};d.shareToFriend=function(f,e){a({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:f.appId?f.appId:"",img_url:f.imgUrl,link:f.link,desc:f.desc,title:f.title,img_width:"640",img_height:"640"},e)};d.generalShare=function(f,e){a({menu:"menu:general:share"},{appid:f.appId?f.appId:"",img_url:f.imgUrl,link:f.link,desc:f.desc,title:f.title,img_width:"640",img_height:"640"},e)};d.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu")};d.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu")};d.showToolbar=function(){WeixinJSBridge.call("showToolbar")};d.hideToolbar=function(){WeixinJSBridge.call("hideToolbar")};d.ready=function(g){if(g&&typeof g=="function"){var e=this;var f=function(){g(e)};if(typeof c.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",f,false)}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",f);document.attachEvent("onWeixinJSBridgeReady",f)}}}else{f()}}};d.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)};d.enableDebugMode=function(e){c.onerror=function(j,g,f,h){if(typeof e==="function"){e({message:j,script:g,line:f,column:h})}else{var k=[];k.push("额，代码有错。。。");k.push("\n错误信息：",j);k.push("\n出错文件：",g);k.push("\n出错位置：",f+"行，"+h+"列");alert(k.join(""))}}}})(window);var callbackUserSaveHandler=function(a){};var resourceType="1";var COMMON_SYSTEM_ERROR_TIP="系统繁忙，请稍候再试！";var getQueryString=function(d){var f=decodeURIComponent(location.search.slice(1));if(f!=""){var c=f.split("&");for(var e=0,a=c.length,b;e<a;e++){b=c[e].split("=");if(b[0]===d){return b[1]}}return""}return""};var from=getQueryString("from");var gefrom=getQueryString("gefrom");if(from!=null&&from!=""){gefrom=from}var noRunShare=$("#noRunShare").val();if(!noRunShare){if(from!=null&&from!=""&&window.location.pathname.indexOf("index.html")<0){}}function toUrl(a){if(from!=null&&from!=""){if(a.indexOf(".html?")>0){a=a+"&gefrom="+from}else{a=a+"?gefrom="+from}}if(gefrom!=null&&gefrom!=""){if(a.indexOf("gefrom=")<0){if(a.indexOf(".html?")>0){a=a+"&gefrom="+gefrom}else{a=a+"?gefrom="+gefrom}}}setTimeout("window.location.href='"+a+"'",5)}$(function(){$("script").each(function(a,b){var c=$(this).attr("src");$(this).attr("src",c+"?v="+version)});$("link").each(function(b,c){var a=$(this).attr("href")});$.ajax({type:"get",async:false,url:domain_url+"version/check",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackVersionHandler",success:function(a){if(!a.result){location.href=a.redirect}share_img=a.si;share_title=a.st;share_desc=a.sd;share_group=a.sgt},error:function(){}})});var getResult=function(b,e,f,c,a){var d=getQueryString("dev");if(d||(localStorage&&localStorage.dev)){localStorage&&(localStorage.dev=true);typeof window[f]=="function"&&window[f](window[f+"Data"]);return}if(c){showLoading(a)}$.ajax({type:"GET",async:false,url:domain_url+b,data:e,dataType:"jsonp",jsonp:f,complete:function(){if(c){hideLoading(a)}},success:function(g){}})};var simpleTpl=function(a){a=$.isArray(a)?a.join(""):(a||"");return{store:a,_:function(){var b=this;$.each(arguments,function(c,d){b.store+=d});return this},toString:function(){return this.store}}};var normalDate=function(b,m,j){var b=Number(b),d=new Date(b),n,m=m?m:"yyyy-mm-dd hh:ii:ss",j=(j===undefined)?true:j,a=function(o){return o<10?"0"+o:o},h=j?a:function(o){return o};var k=h(d.getFullYear()),g=h(d.getMonth()+1),l=h(d.getDate()),f=h(d.getHours()),e=h(d.getMinutes()),c=h(d.getSeconds());n=m.replace(/yyyy/i,k).replace(/mm/i,g).replace(/dd/i,l).replace(/hh/i,f).replace(/ii/i,e).replace(/ss/i,c);return n};var share=function(a){var c=simpleTpl(),b=$("#share_box");if(b.length==0){c._('<div class="share_box" id="share_box"></div>');b=$(c.toString());b.click(function(d){$(this).hide()});$("body").append(b)}else{b.show()}};var str2date=function(a){a=a.replace(/-/g,"/");return new Date(a)};var timestamp=function(a){return Date.parse(str2date(a))};var dateformat=function(date,format){var z={M:date.getMonth()+1,d:date.getDate(),h:date.getHours(),m:date.getMinutes(),s:date.getSeconds()};format=format.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)});return format.replace(/(y+)/g,function(v){return date.getFullYear().toString().slice(-v.length)})};var showLoading=function(f){var c=simpleTpl(),f=f||$("body"),e=f?f.find(".spinner"):$("body").children(".spinner");if(e.length>0){e.show()}else{c._('<div class="spinner">')._('<div class="spinner-wrapper">')._('<div class="spinner-container container1">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container2">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container3">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._("</div>")._("</div>");var d=$(window).width(),a=$(window).height(),b=50;e=$(c.toString()).css({left:(d-b)/2,top:(a-b)/2});f.append(e)}};var hideLoading=function(a){if(a){a.find(".spinner").hide()}else{$("body").children(".spinner").hide()}$(".copyright").removeClass("hidden")};(function(a){a.fn.progress=function(d){var j={eAttr:"data-etime",sAttr:"data-stime",wTime:3000,index:0,callback:null,stCallback:null,sdCallback:null,otCallback:null};var h=function(k){return k<10?"0"+k:k};var g=a.extend(j,d);var c=0;var f=a(this);var e=a(window).width();var b=function(){f.each(function(){var m=window.server_time;var n=a(this);var p=parseInt(n.attr(g.sAttr));var r=parseInt(n.attr(g.eAttr));var s=parseInt(n.attr(g.pAttr));var o=isNaN(p)?0:p-m;var l=isNaN(r)?0:r-m;var q=(isNaN(p)||isNaN(r))?0:r-p;var k=0;if(o>0){k=1;g.stCallback&&g.stCallback(k)}else{if(l>0){k=2;g.sdCallback&&g.sdCallback(k)}else{k=3;g.otCallback&&g.otCallback(k)}}n.closest(".page").attr("data-state",k);g.callback&&g.callback(k)})};b();c=setInterval(function(){b()},g.wTime)}})(Zepto);var imgReady=(function(){var d=[],c=null,b=function(){var e=0;for(;e<d.length;e++){d[e].end?d.splice(e--,1):d[e]()}!d.length&&a()},a=function(){clearInterval(c);c=null};return function(f,l,n,k){var m,g,o,j,e,h=new Image();h.src=f;if(h.complete){l.call(h);n&&n.call(h);return}g=h.width;o=h.height;h.onerror=function(){k&&k.call(h);m.end=true;h=h.onload=h.onerror=null};m=function(){j=h.width;e=h.height;if(j!==g||e!==o||j*e>1024){l.call(h);m.end=true}};m();h.onload=function(){!m.end&&m();n&&n.call(h);h=h.onload=h.onerror=null};if(!m.end){d.push(m);if(c===null){c=setInterval(b,40)}}}})();function add_param(e,h,c,b){if((e==null)||(e.length==0)){e=document.location.href}var a=e.split("?");var f="";if(a.length>1){var j=a[1].split("&");for(var d=0;(d<j.length);d++){var g=j[d].split("=");if(!(b&&g[0]==h)){if(f==""){f="?"}else{f+="&"}f+=g[0]+"="+g[1]}}}if(c!==null){if(f==""){f="?"}else{f+="&"}f+=h+"="+c}return a[0]+f}function add_yao_prefix(a){return"http://yao.qq.com/tv/entry?redirect_uri="+encodeURIComponent(a)}var is_android=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("android")>-1};function __ns(fullNs){var nsArray=fullNs.split(".");var evalStr="";var ns="";for(var i=0,l=nsArray.length;i<l;i++){i!==0&&(ns+=".");ns+=nsArray[i];evalStr+="( typeof "+ns+' === "undefined" && ('+ns+" = {}) );"}evalStr!==""&&eval(evalStr)}var __noop=function(){};var W=W||window;__ns("H");(function(d,f){var r="",w,g,p,q={Webkit:"webkit",Moz:"",O:"o"},n=window.document,a=n.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,s,k,m,e,j,v,u,b,t={};function c(x){return x.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function h(x){return w?w+x:x.toLowerCase()}d.each(q,function(y,x){if(a.style[y+"TransitionProperty"]!==f){r="-"+y.toLowerCase()+"-";w=x;return false}});l=r+"transform";t[s=r+"transition-property"]=t[k=r+"transition-duration"]=t[e=r+"transition-delay"]=t[m=r+"transition-timing-function"]=t[j=r+"animation-name"]=t[v=r+"animation-duration"]=t[b=r+"animation-delay"]=t[u=r+"animation-timing-function"]="";d.fx={off:(w===f&&a.style.transitionProperty===f),speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")};d.fn.animate=function(y,z,A,B,x){if(d.isFunction(z)){B=z,A=f,z=f}if(d.isFunction(A)){B=A,A=f}if(d.isPlainObject(z)){A=z.easing,B=z.complete,x=z.delay,z=z.duration}if(z){z=(typeof z=="number"?z:(d.fx.speeds[z]||d.fx.speeds._default))/1000}if(x){x=parseFloat(x)/1000}return this.anim(y,z,A,B,x)};d.fn.anim=function(F,A,z,H,B){var G,D={},J,E="",C=this,y,I=d.fx.transitionEnd,x=false;if(A===f){A=d.fx.speeds._default/1000}if(B===f){B=0}if(d.fx.off){A=0}if(typeof F=="string"){D[j]=F;D[v]=A+"s";D[b]=B+"s";D[u]=(z||"linear");I=d.fx.animationEnd}else{J=[];for(G in F){if(o.test(G)){E+=G+"("+F[G]+") "}else{D[G]=F[G],J.push(c(G))}}if(E){D[l]=E,J.push(l)}if(A>0&&typeof F==="object"){D[s]=J.join(", ");D[k]=A+"s";D[e]=B+"s";D[m]=(z||"linear")}}y=function(K){if(typeof K!=="undefined"){if(K.target!==K.currentTarget){return}d(K.target).unbind(I,y)}else{d(this).unbind(I,y)}x=true;d(this).css(t);H&&H.call(this)};if(A>0){this.bind(I,y);setTimeout(function(){if(x){return}y.call(C)},(A*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(D);if(A<=0){setTimeout(function(){C.each(function(){y.call(this)})},0)}return this};a=null})(Zepto);(function(a){a.fn.coffee=function(k){var g=null;var h=null;var l="cubic-bezier(.09,.64,.16,.94)";var f=a(this);var b=a.extend({},a.fn.coffee.defaults,k);var j=b.steamWidth;var o=a('<div class="coffee-steam-box"></div>').css({height:b.steamHeight,width:b.steamWidth,left:60,top:-50,position:"absolute",overflow:"hidden","z-index":0}).appendTo(f);a.fn.coffee.stop=function(){clearInterval(g);clearInterval(h)};a.fn.coffee.start=function(){g=setInterval(function(){e()},n(b.steamInterval/2,b.steamInterval*2));h=setInterval(function(){d()},n(100,1000)+n(1000,3000))};return f;function e(){var x=n(8,b.steamMaxSize);var v=c(1,b.steamsFontFamily);var s="#"+c(6,"0123456789ABCDEF");var u=n(0,44);var t=n(-90,89);var r=m(0.4,1);var p=a.fx.cssPrefix+"transform";p=p+":rotate("+t+"deg) scale("+r+");";var w=a('<span class="coffee-steam">'+c(1,b.steams)+"</span>");var q=n(0,j-b.steamWidth-x);if(q>u){q=n(0,u)}w.css({position:"absolute",left:u,top:b.steamHeight,"font-size:":x+"px",color:s,"font-family":v,display:"block",opacity:1}).attr("style",w.attr("style")+p).appendTo(o).animate({top:n(b.steamHeight/2,0),left:q,opacity:0},n(b.steamFlyTime/2,b.steamFlyTime*1.2),l,function(){w.remove();w=null})}function d(){var p=n(-10,10);p+=parseInt(o.css("left"));if(p>=54){p=54}else{if(p<=34){p=34}}o.animate({left:p},n(1000,3000),l)}function c(s,r){s=s||1;var t="";var q=r.length-1;var p=0;for(i=0;i<s;i++){p=n(0,q-1);t+=r.slice(p,p+1)}return t}function n(q,s){var p=s-q;var r=q+Math.round(Math.random()*p);return parseInt(r)}function m(q,s){var p=s-q;var r=q+Math.random()*p;return parseFloat(r)}};a.fn.coffee.defaults={steams:[],steamsFontFamily:[],steamFlyTime:5000,steamInterval:500,steamMaxSize:30,steamHeight:200,steamWidth:300};a.fn.coffee.version="2.0.0"})(Zepto);(function(a){a.fn.audio=function(r){a.fn.audio.defaults={auto:true,stopMode:"stop",audioUrl:"",steams:[],steamHeight:150,steamWidth:44};var b=a.extend({},a.fn.audio.defaults,r);var g=a(this),j=g.find(".audio-icon"),l=g.find(".audio-txt"),o=g.find(".coffee-flow"),f=b.auto,k=null;var n=function(){g.addClass("zlow")},m=function(){g.removeClass("zlow none")},c=function(){if(g.length==0){return}o.on("click",function(s){s.preventDefault();d()});a(audio).on("play",function(){f=true;e(true);j.addClass("animated");a.fn.coffee.start();g.find(".coffee-steam-box").show(500)}).on("pause",function(){f=false;e(false);a.fn.coffee.stop();j.removeClass("animated");g.find(".coffee-steam-box").hide(500)})},e=function(s){l.text(s?"打开":"关闭");if(k){clearTimeout(k)}l.removeClass("animated hide");k=setTimeout(function(){l.addClass("animated").addClass("hide")},1000)},d=function(){if(f){q()}else{h()}},h=function(){audio&&audio.play()},q=function(){if(audio){audio.pause();if(b.stopMode=="stop"){audio.currentTime=0}}},p=function(){o.coffee({steams:b.steams,steamHeight:b.steamHeight,steamWidth:b.steamWidth});var u={loop:false,preload:"auto",src:b.audioUrl,autoplay:b.auto};audio=new Audio();for(var t in u){if(u.hasOwnProperty(t)&&(t in audio)){audio[t]=u[t]}}audio.load();c();var s=setInterval(function(){if(!audio){return}m();clearInterval(s)},1000)};p();a(".home").click(function(){if(audio){audio.pause();audio.currentTime=0}});this.pause=function(){if(audio){audio.pause()}};return this}})(Zepto);if(typeof Zepto==="undefined"){throw new Error("Parallax.js's script requires Zepto")}!function(g){var z,r,v,h,y,n,x,l,b,a,c,f,q=false,e=true;window.curPage=0;g.fn.parallax=function(A){f=g.extend({},g.fn.parallax.defaults,A);return this.each(function(){b=g(this);a=b.find(".page");s()})};g.fn.parallax.defaults={direction:"vertical",swipeAnim:"default",drag:true,loading:false,indicator:false,arrow:false,onchange:function(){},orientationchange:function(){}};function s(){if(f.loading){g(".wrapper").append('<div class="parallax-loading"><i class="ui-loading ui-loading-white"></i></div>')}else{e=false}y="stay";n=a.length;x=g(window).width();l=g(window).height();c=g("[data-animation]");for(var A=0;A<n;A++){g(a[A]).attr("data-id",A+1)}b.addClass(f.direction).addClass(f.swipeAnim);a.css({width:x+"px",height:l+"px"});f.direction==="horizontal"?b.css("width",x*a.length):b.css("height",l*a.length);if(f.swipeAnim==="cover"){b.css({width:x,height:l});a[0].style.display="block"}if(!f.loading){g(a[curPage]).addClass("current");f.onchange(curPage,a[curPage],y);d()}if(f.arrow){a.append('<span class="parallax-arrow"></span>');g(a[n-1]).find(".parallax-arrow").remove()}}function u(A){if(e===true){event.preventDefault();return false}q=true;f.direction==="horizontal"?z=A.pageX:z=A.pageY;if(f.swipeAnim==="default"){b.addClass("drag");h=b.css("-webkit-transform").replace("matrix(","").replace(")","").split(",");f.direction==="horizontal"?h=parseInt(h[4]):h=parseInt(h[5])}if((f.swipeAnim==="cover"&&f.drag)){a.addClass("drag")}v=1}function k(A){if(e===true||q===false){event.preventDefault();return false}event.preventDefault();f.direction==="horizontal"?r=A.pageX:r=A.pageY;t();if(f.drag&&!o()){p()}else{if(o()){b.css("-webkit-transform","matrix(1, 0, 0, 1, "+h+", 0)")}}v=2}function j(A){if(e===true||v!==2){}else{q=false;f.direction==="horizontal"?r=A.pageX:r=A.pageY;if(f.swipeAnim==="default"&&!o()){b.removeClass("drag");if(Math.abs(r-z)<=50){m(curPage);y="stay"}else{if(r>=z){m(curPage-1);y="backward"}else{if(r<z){m(curPage+1);y="forward"}}}}else{if(f.swipeAnim==="cover"&&!o()){if(Math.abs(r-z)<=50&&r>=z&&f.drag){m(curPage,"keep-backward");y="stay"}else{if(Math.abs(r-z)<=50&&r<z&&f.drag){m(curPage,"keep-forward");y="stay"}else{if(Math.abs(r-z)>50&&r>=z&&f.drag){m(curPage-1,"backward");y="backward"}else{if(Math.abs(r-z)>50&&r<z&&f.drag){m(curPage+1,"forward");y="forward"}else{if(Math.abs(r-z)>50&&r>=z&&!f.drag){m(curPage-1,"backward");y="backward"}else{if(Math.abs(r-z)>50&&r<z&&!f.drag){m(curPage+1,"forward");y="forward"}}}}}}}}if(f.indicator){g(g(".parallax-h-indicator ul li, .parallax-v-indicator ul li").removeClass("current").get(curPage)).addClass("current")}v=3}}function p(){if(f.swipeAnim==="default"){var B=h+r-z;f.direction==="horizontal"?b.css("-webkit-transform","matrix(1, 0, 0, 1, "+B+", 0)"):b.css("-webkit-transform","matrix(1, 0, 0, 1, 0, "+B+")")}else{if(f.swipeAnim==="cover"){var B=r-z,A=g(a[curPage-1]),C=g(a[curPage+1]);g(a).css({"z-index":0});if(f.direction==="horizontal"&&r>=z){A.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(B-x)+"px)"})}else{if(f.direction==="horizontal"&&r<z){C.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(x+B)+"px)"})}else{if(f.direction==="vertical"&&r>=z){A.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(B-l)+"px)"})}else{if(f.direction==="vertical"&&r<z){C.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(l+B)+"px)"})}}}}}}}function m(A,B){curPage=A;if(f.swipeAnim==="default"){var C=0;f.direction==="horizontal"?C=A*(-x):C=A*(-l);f.direction==="horizontal"?b.css({"-webkit-transform":"matrix(1, 0, 0, 1, "+C+", 0)"}):b.css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, "+C+")"})}else{if(f.swipeAnim==="cover"){if(B==="keep-backward"&&f.drag){a.removeClass("drag");f.direction==="horizontal"?g(a[curPage-1]).css({"-webkit-transform":"translateX(-100%)"}):g(a[curPage-1]).css({"-webkit-transform":"translateY(-100%)"})}else{if(B==="keep-forward"&&f.drag){a.removeClass("drag");f.direction==="horizontal"?g(a[curPage+1]).css({"-webkit-transform":"translateX(100%)"}):g(a[curPage+1]).css({"-webkit-transform":"translateY(100%)"})}else{if(B==="forward"&&f.drag){a.removeClass("drag");g(a[curPage-1]).addClass("back");a[curPage].style.webkitTransform="translate(0, 0)"}else{if(B==="backward"&&f.drag){a.removeClass("drag");g(a[curPage+1]).addClass("back");a[curPage].style.webkitTransform="translate(0, 0)"}else{if(B==="forward"&&!f.drag){b.addClass("animate");g(a[curPage-1]).addClass("back");g(a[curPage]).addClass("front").show()}else{if(B==="backward"&&!f.drag){b.addClass("animate");g(a[curPage+1]).addClass("back");g(a[curPage]).addClass("front").show()}}}}}}}}e=true;setTimeout(function(){e=false},300)}function t(){if(f.direction==="horizontal"){if(r>=z){b.removeClass("forward").addClass("backward")}else{if(r<z){b.removeClass("backward").addClass("forward")}}}else{if(r>=z){b.removeClass("forward").addClass("backward")}else{if(r<z){b.removeClass("backward").addClass("forward")}}}}function o(){var A=g(".page").index(g(".page").not(function(){return g(this).hasClass("none")}).last());if(f.direction==="horizontal"){if((r>=z&&curPage===0)||(r<=z&&curPage===A)){return true}}else{if((r>=z&&curPage===0)||(r<=z&&curPage===A)){return true}}return false}function w(){return a.parent().hasClass("disabled")}function d(){c.css({"-webkit-animation":"none",display:"none"});g(".current [data-animation]").each(function(D,G){var B=g(G),F=B.attr("data-animation"),E=B.attr("data-duration")||500,C=B.attr("data-timing-function")||"ease",A=B.attr("data-delay")?B.attr("data-delay"):0;if(F==="followSlide"){if(f.direction==="horizontal"&&y==="forward"){F="followSlideToLeft"}else{if(f.direction==="horizontal"&&y==="backward"){F="followSlideToRight"}else{if(f.direction==="vertical"&&y==="forward"){F="followSlideToTop"}else{if(f.direction==="vertical"&&y==="backward"){F="followSlideToBottom"}}}}}B.css({display:"block","-webkit-animation-name":F,"-webkit-animation-duration":E+"ms","-webkit-animation-timing-function":"ease","-webkit-animation-timing-function":C,"-webkit-animation-delay":A+"ms","-webkit-animation-fill-mode":"both"})})}g(document).on("touchstart",".page",function(A){if(!w()){u(A.changedTouches[0])}}).on("touchmove",".page",function(A){if(!w()){k(A.changedTouches[0])}}).on("touchend",".page",function(A){if(!w()){j(A.changedTouches[0])}}).on("webkitAnimationEnd webkitTransitionEnd",".pages",function(){if(y!=="stay"){setTimeout(function(){g(".back").hide().removeClass("back");g(".front").show().removeClass("front");b.removeClass("forward backward animate")},10);a.length>0&&g(a.removeClass("current").get(curPage)).addClass("current");f.onchange(curPage,a[curPage],y);d()}});g(".page *").on("webkitAnimationEnd",function(){event.stopPropagation()});window.addEventListener("onorientationchange" in window?"orientationchange":"resize",function(){if(window.orientation===180||window.orientation===0){f.orientationchange("portrait")}if(window.orientation===90||window.orientation===-90){f.orientationchange("landscape")}},false)}(Zepto);WeixinApi.ready(function(a){var b={appId:"",imgUrl:share_img,link:add_param(share_url,"resopenid",hex_md5(openid),true),desc:share_desc,title:share_title};var c={favorite:false,async:true,ready:function(){this.dataLoaded({title:share_title,link:add_yao_prefix(add_param(share_url,"resopenid",hex_md5(openid),true)),desc:share_desc,imgUrl:share_img})},confirm:function(d){}};a.shareToFriend(b,c);a.shareToTimeline(b,c);a.generalShare(b,c)});