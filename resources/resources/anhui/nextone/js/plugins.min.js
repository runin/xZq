var hexcase=0;function hex_md5(b){return rstr2hex(rstr_md5(str2rstr_utf8(b)))}function hex_hmac_md5(d,c){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(d),str2rstr_utf8(c)))}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(b){return binl2rstr(binl_md5(rstr2binl(b),b.length*8))}function rstr_hmac_md5(o,l){var m=rstr2binl(o);if(m.length>16){m=binl_md5(m,o.length*8)}var j=Array(16),n=Array(16);for(var h=0;h<16;h++){j[h]=m[h]^909522486;n[h]=m[h]^1549556828}var k=binl_md5(j.concat(rstr2binl(l)),512+l.length*8);return binl2rstr(binl_md5(n.concat(k),512+128))}function rstr2hex(m){try{hexcase}catch(j){hexcase=0}var k=hexcase?"0123456789ABCDEF":"0123456789abcdef";var e="";var h;for(var l=0;l<m.length;l++){h=m.charCodeAt(l);e+=k.charAt((h>>>4)&15)+k.charAt(h&15)}return e}function str2rstr_utf8(k){var f="";var j=-1;var g,h;while(++j<k.length){g=k.charCodeAt(j);h=j+1<k.length?k.charCodeAt(j+1):0;if(55296<=g&&g<=56319&&56320<=h&&h<=57343){g=65536+((g&1023)<<10)+(h&1023);j++}if(g<=127){f+=String.fromCharCode(g)}else{if(g<=2047){f+=String.fromCharCode(192|((g>>>6)&31),128|(g&63))}else{if(g<=65535){f+=String.fromCharCode(224|((g>>>12)&15),128|((g>>>6)&63),128|(g&63))}else{if(g<=2097151){f+=String.fromCharCode(240|((g>>>18)&7),128|((g>>>12)&63),128|((g>>>6)&63),128|(g&63))}}}}}return f}function rstr2binl(d){var e=Array(d.length>>2);for(var f=0;f<e.length;f++){e[f]=0}for(var f=0;f<d.length*8;f+=8){e[f>>5]|=(d.charCodeAt(f/8)&255)<<(f%32)}return e}function binl2rstr(d){var e="";for(var f=0;f<d.length*32;f+=8){e+=String.fromCharCode((d[f>>5]>>>(f%32))&255)}return e}function binl_md5(a,r){a[r>>5]|=128<<((r)%32);a[(((r+64)>>>9)<<4)+14]=r;var b=1732584193;var c=-271733879;var d=-1732584194;var q=271733878;for(var u=0;u<a.length;u+=16){var s=b;var t=c;var v=d;var w=q;b=md5_ff(b,c,d,q,a[u+0],7,-680876936);q=md5_ff(q,b,c,d,a[u+1],12,-389564586);d=md5_ff(d,q,b,c,a[u+2],17,606105819);c=md5_ff(c,d,q,b,a[u+3],22,-1044525330);b=md5_ff(b,c,d,q,a[u+4],7,-176418897);q=md5_ff(q,b,c,d,a[u+5],12,1200080426);d=md5_ff(d,q,b,c,a[u+6],17,-1473231341);c=md5_ff(c,d,q,b,a[u+7],22,-45705983);b=md5_ff(b,c,d,q,a[u+8],7,1770035416);q=md5_ff(q,b,c,d,a[u+9],12,-1958414417);d=md5_ff(d,q,b,c,a[u+10],17,-42063);c=md5_ff(c,d,q,b,a[u+11],22,-1990404162);b=md5_ff(b,c,d,q,a[u+12],7,1804603682);q=md5_ff(q,b,c,d,a[u+13],12,-40341101);d=md5_ff(d,q,b,c,a[u+14],17,-1502002290);c=md5_ff(c,d,q,b,a[u+15],22,1236535329);b=md5_gg(b,c,d,q,a[u+1],5,-165796510);q=md5_gg(q,b,c,d,a[u+6],9,-1069501632);d=md5_gg(d,q,b,c,a[u+11],14,643717713);c=md5_gg(c,d,q,b,a[u+0],20,-373897302);b=md5_gg(b,c,d,q,a[u+5],5,-701558691);q=md5_gg(q,b,c,d,a[u+10],9,38016083);d=md5_gg(d,q,b,c,a[u+15],14,-660478335);c=md5_gg(c,d,q,b,a[u+4],20,-405537848);b=md5_gg(b,c,d,q,a[u+9],5,568446438);q=md5_gg(q,b,c,d,a[u+14],9,-1019803690);d=md5_gg(d,q,b,c,a[u+3],14,-187363961);c=md5_gg(c,d,q,b,a[u+8],20,1163531501);b=md5_gg(b,c,d,q,a[u+13],5,-1444681467);q=md5_gg(q,b,c,d,a[u+2],9,-51403784);d=md5_gg(d,q,b,c,a[u+7],14,1735328473);c=md5_gg(c,d,q,b,a[u+12],20,-1926607734);b=md5_hh(b,c,d,q,a[u+5],4,-378558);q=md5_hh(q,b,c,d,a[u+8],11,-2022574463);d=md5_hh(d,q,b,c,a[u+11],16,1839030562);c=md5_hh(c,d,q,b,a[u+14],23,-35309556);b=md5_hh(b,c,d,q,a[u+1],4,-1530992060);q=md5_hh(q,b,c,d,a[u+4],11,1272893353);d=md5_hh(d,q,b,c,a[u+7],16,-155497632);c=md5_hh(c,d,q,b,a[u+10],23,-1094730640);b=md5_hh(b,c,d,q,a[u+13],4,681279174);q=md5_hh(q,b,c,d,a[u+0],11,-358537222);d=md5_hh(d,q,b,c,a[u+3],16,-722521979);c=md5_hh(c,d,q,b,a[u+6],23,76029189);b=md5_hh(b,c,d,q,a[u+9],4,-640364487);q=md5_hh(q,b,c,d,a[u+12],11,-421815835);d=md5_hh(d,q,b,c,a[u+15],16,530742520);c=md5_hh(c,d,q,b,a[u+2],23,-995338651);b=md5_ii(b,c,d,q,a[u+0],6,-198630844);q=md5_ii(q,b,c,d,a[u+7],10,1126891415);d=md5_ii(d,q,b,c,a[u+14],15,-1416354905);c=md5_ii(c,d,q,b,a[u+5],21,-57434055);b=md5_ii(b,c,d,q,a[u+12],6,1700485571);q=md5_ii(q,b,c,d,a[u+3],10,-1894986606);d=md5_ii(d,q,b,c,a[u+10],15,-1051523);c=md5_ii(c,d,q,b,a[u+1],21,-2054922799);b=md5_ii(b,c,d,q,a[u+8],6,1873313359);q=md5_ii(q,b,c,d,a[u+15],10,-30611744);d=md5_ii(d,q,b,c,a[u+6],15,-1560198380);c=md5_ii(c,d,q,b,a[u+13],21,1309151649);b=md5_ii(b,c,d,q,a[u+4],6,-145523070);q=md5_ii(q,b,c,d,a[u+11],10,-1120210379);d=md5_ii(d,q,b,c,a[u+2],15,718787259);c=md5_ii(c,d,q,b,a[u+9],21,-343485551);b=safe_add(b,s);c=safe_add(c,t);d=safe_add(d,v);q=safe_add(q,w)}return Array(b,c,d,q)}function md5_cmn(a,k,l,m,b,j){return safe_add(bit_rol(safe_add(safe_add(k,a),safe_add(m,j)),b),l)}function md5_ff(l,m,a,b,n,c,d){return md5_cmn((m&a)|((~m)&b),l,m,n,c,d)}function md5_gg(l,m,a,b,n,c,d){return md5_cmn((m&b)|(a&(~b)),l,m,n,c,d)}function md5_hh(l,m,a,b,n,c,d){return md5_cmn(m^a^b,l,m,n,c,d)}function md5_ii(l,m,a,b,n,c,d){return md5_cmn(a^(m|(~b)),l,m,n,c,d)}function safe_add(f,g){var h=(f&65535)+(g&65535);var e=(f>>16)+(g>>16)+(h>>16);return(e<<16)|(h&65535)}function bit_rol(d,c){return(d<<c)|(d>>>(32-c))}function recordUserLog(e,a,d,c,b){$.ajax({type:"get",async:false,url:domain_url+"userlog",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackDataHandler",data:{openId:e,operateDesc:encodeURIComponent(a),operateDomId:d,loadingTime:c,from:gefrom,flag:b}})}function recordUserOperate(c,a,b){recordUserLog(c,a,b,"","false")}function recordUserPage(c,a,b){recordUserLog(c,a,"",b,"true")}$(function(){recordUserPage(openid,$("title").html(),"");$("body").delegate("*[data-collect='true']","click",function(a){if($(this).attr("data-stoppropagation")=="true"){a.stopPropagation()}recordUserOperate(openid,$(this).attr("data-collect-desc"),$(this).attr("data-collect-flag"))})});var callbackUserSaveHandler=function(a){};var resourceType="1";var COMMON_SYSTEM_ERROR_TIP="系统繁忙，请稍候再试！";var getQueryString=function(d){var f=decodeURIComponent(location.search.slice(1));if(f!=""){var c=f.split("&");for(var e=0,a=c.length,b;e<a;e++){b=c[e].split("=");if(b[0]===d){return b[1]}}return""}return""};var from=getQueryString("from");var gefrom=getQueryString("gefrom");if(from!=null&&from!=""){gefrom=from}var noRunShare=$("#noRunShare").val();if(!noRunShare){if(from!=null&&from!=""&&window.location.pathname.indexOf("index.html")<0){}}function toUrl(a){if(from!=null&&from!=""){if(a.indexOf(".html?")>0){a=a+"&gefrom="+from}else{a=a+"?gefrom="+from}}if(gefrom!=null&&gefrom!=""){if(a.indexOf("gefrom=")<0){if(a.indexOf(".html?")>0){a=a+"&gefrom="+gefrom}else{a=a+"?gefrom="+gefrom}}}setTimeout("window.location.href='"+a+"'",5)}$(function(){$("script").each(function(a,b){var c=$(this).attr("src");$(this).attr("src",c+"?v="+version)});$("link").each(function(b,c){var a=$(this).attr("href");$(this).attr("href",a+"?v="+version)});$.ajax({type:"get",async:false,url:domain_url+"version/check",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackVersionHandler",success:function(a){if(!a.result){location.href=a.redirect}share_img=a.si;share_title=a.st;share_desc=a.sd;share_group=a.sgt},error:function(){}});$.ajax({type:"get",async:false,url:domain_url+"user/save",data:{openid:openid,type:resourceType,userProfile:userProfile},dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackUserHandler",success:function(a){},error:function(){}})});var getResult=function(b,e,f,c,a){var d=getQueryString("dev");if(d||(localStorage&&localStorage.dev)){localStorage&&(localStorage.dev=true);typeof window[f]=="function"&&window[f](window[f+"Data"]);return}if(c){showLoading(a)}$.ajax({type:"GET",async:false,url:domain_url+b,data:e,dataType:"jsonp",jsonp:f,complete:function(){if(c){hideLoading(a)}},success:function(g){}})};var simpleTpl=function(a){a=$.isArray(a)?a.join(""):(a||"");return{store:a,_:function(){var b=this;$.each(arguments,function(c,d){b.store+=d});return this},toString:function(){return this.store}}};var normalDate=function(b,m,j){var b=Number(b),d=new Date(b),n,m=m?m:"yyyy-mm-dd hh:ii:ss",j=(j===undefined)?true:j,a=function(o){return o<10?"0"+o:o},h=j?a:function(o){return o};var k=h(d.getFullYear()),g=h(d.getMonth()+1),l=h(d.getDate()),f=h(d.getHours()),e=h(d.getMinutes()),c=h(d.getSeconds());n=m.replace(/yyyy/i,k).replace(/mm/i,g).replace(/dd/i,l).replace(/hh/i,f).replace(/ii/i,e).replace(/ss/i,c);return n};var share=function(a){var c=simpleTpl(),b=$("#share_box");if(b.length==0){c._('<div class="share_box" id="share_box"></div>');b=$(c.toString());b.click(function(d){$(this).hide()});$("body").append(b)}else{b.show()}};var str2date=function(a){a=a.replace(/-/g,"/");return new Date(a)};var timestamp=function(a){return Date.parse(str2date(a))};var dateformat=function(date,format){var z={M:date.getMonth()+1,d:date.getDate(),h:date.getHours(),m:date.getMinutes(),s:date.getSeconds()};format=format.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)});return format.replace(/(y+)/g,function(v){return date.getFullYear().toString().slice(-v.length)})};var showLoading=function(f){var c=simpleTpl(),f=f||$("body"),e=f?f.find(".spinner"):$("body").children(".spinner");if(e.length>0){e.show()}else{c._('<div class="spinner">')._('<div class="spinner-wrapper">')._('<div class="spinner-container container1">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container2">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container3">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._("</div>")._("</div>");var d=$(window).width(),a=$(window).height(),b=50;e=$(c.toString()).css({left:(d-b)/2,top:(a-b)/2});f.append(e)}};var hideLoading=function(a){if(a){a.find(".spinner").hide()}else{$("body").children(".spinner").hide()}$(".copyright").removeClass("hidden")};(function(a){a.fn.progress=function(d){var j={eAttr:"etime",sAttr:"stime",pAttr:"ptime",wTime:1000,cTime:new Date().getTime(),index:0,callback:null,stCallback:null,sdCallback:null,otCallback:null,ptCallback:null};var h=function(k){return k<10?"0"+k:k};var g=a.extend(j,d);var c=0;var f=a(this);var e=a(window).width();var b=function(){g.cTime+=g.wTime;f.each(function(){var m=a(this);var o=parseInt(m.attr(g.sAttr));var r=parseInt(m.attr(g.eAttr));var s=parseInt(m.attr(g.pAttr));var n=isNaN(o)?0:o-g.cTime;var l=isNaN(r)?0:r-g.cTime;var p=isNaN(s)?0:s-g.cTime;var q=(isNaN(o)||isNaN(r))?0:r-o;var k=0;if(n>0){k=1;m.css("width","13px");W.pages_info[g.index]["state"]=k;g.stCallback&&g.stCallback(k)}else{if(l>0){k=2;var t=1-l/q;if(e*t>13){m.css("width",(t*100)+"%")}W.pages_info[g.index]["state"]=k;g.sdCallback&&g.sdCallback(k)}else{if(p<=0){k=4;m.css("width","100%");W.pages_info[g.index]["state"]=k;g.ptCallback&&g.ptCallback(k)}else{k=3;m.css("width","100%");W.pages_info[g.index]["state"]=k;g.otCallback&&g.otCallback(k)}}}m.closest(".page").attr("data-state",k);g.callback&&g.callback(k)})};c=setInterval(function(){b()},g.wTime)}})(Zepto);var imgReady=(function(){var d=[],c=null,b=function(){var e=0;for(;e<d.length;e++){d[e].end?d.splice(e--,1):d[e]()}!d.length&&a()},a=function(){clearInterval(c);c=null};return function(f,l,n,k){var m,g,o,j,e,h=new Image();h.src=f;if(h.complete){l.call(h);n&&n.call(h);return}g=h.width;o=h.height;h.onerror=function(){k&&k.call(h);m.end=true;h=h.onload=h.onerror=null};m=function(){j=h.width;e=h.height;if(j!==g||e!==o||j*e>1024){l.call(h);m.end=true}};m();h.onload=function(){!m.end&&m();n&&n.call(h);h=h.onload=h.onerror=null};if(!m.end){d.push(m);if(c===null){c=setInterval(b,40)}}}})();var add_yao_prefix=function(a){return"http://yao.qq.com/tv/entry?redirect_uri="+encodeURIComponent(a)};var is_android=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("android")>-1};function __ns(fullNs){var nsArray=fullNs.split(".");var evalStr="";var ns="";for(var i=0,l=nsArray.length;i<l;i++){i!==0&&(ns+=".");ns+=nsArray[i];evalStr+="( typeof "+ns+' === "undefined" && ('+ns+" = {}) );"}evalStr!==""&&eval(evalStr)}var __noop=function(){};var W=W||window;__ns("H");(function($){$.fn.wx=function(option){var $wx=$(this);var opts=$.extend({},$.fn.wx.defaults,option);document.addEventListener("WeixinJSBridgeReady",function(){window.G_WEIXIN_READY=true},false);function CallWeiXinAPI(fn,count){var total=2000;count=count||0;if(true===window.G_WEIXIN_READY||("WeixinJSBridge" in window)){fn.apply(null,[])}else{if(count<=total){setTimeout(function(){CallWeiXinAPI(fn,count++)},15)}}}var _unit={execHandler:function(handler){if(handler&&handler instanceof Object){var callback=handler.callback||null;var args=handler.args||[];var context=handler.context||null;var delay=handler.delay||-1;if(callback&&callback instanceof Function){if(typeof(delay)=="number"&&delay>=0){setTimeout(function(){callback.apply(context,args)},delay)}else{callback.apply(context,args)}}}},execAfterMergerHandler:function(handler,_args){if(handler&&handler instanceof Object){var args=handler.args||[];handler.args=_args.concat(args)}this.execHandler(handler)},addOpenid:function(){var url=window.location.href;if(url.indexOf("resopenid=")>0){url=this.replaceParamVal("resopenid",hex_md5(openid))}else{if(url.indexOf(".html?")>0){url=url+"&resopenid="+hex_md5(openid)}else{url=url+"?resopenid="+hex_md5(openid)}}return add_yao_prefix(url)},replaceParamVal:function(paramName,replaceWith){var oUrl=window.location.href.toString();var re=eval("/("+paramName+"=)([^&]*)/gi");var nUrl=oUrl.replace(re,paramName+"="+replaceWith);return nUrl}};var _api={Share:{timeline:function(options,handler){CallWeiXinAPI(function(){WeixinJSBridge.on("menu:share:timeline",function(argv){WeixinJSBridge.invoke("shareTimeline",options,function(res){_unit.execAfterMergerHandler(handler,[res,"timeline"])})})})},message:function(options,handler){CallWeiXinAPI(function(){WeixinJSBridge.on("menu:share:appmessage",function(argv){WeixinJSBridge.invoke("sendAppMessage",options,function(res){_unit.execAfterMergerHandler(handler,[res,"message"])})})})}},setOptionMenu:function(visible,handler){CallWeiXinAPI(function(){if(true===visible){WeixinJSBridge.call("showOptionMenu")}else{WeixinJSBridge.call("hideOptionMenu")}_unit.execAfterMergerHandler(handler,[visible])})}};var opt={img_url:opts.img_url,img_width:180,img_height:180,link:_unit.addOpenid(),desc:opts.desc,title:opts.title};handler={callback:function(res,type){opts.callback&&opts.callback(res,type)}};_api.Share.timeline(opt,handler);_api.Share.message(opt,handler);return $wx};$.fn.wx.defaults={title:"",desc:"",link:document.URL,img:""};$.fn.wx.version="1.0.0"})(Zepto);if(typeof Zepto==="undefined"){throw new Error("Parallax.js's script requires Zepto")}!function(g){var z,r,v,h,y,n,x,l,b,a,c,f,q=false,e=true;window.curPage=0;g.fn.parallax=function(A){f=g.extend({},g.fn.parallax.defaults,A);return this.each(function(){b=g(this);a=b.find(".page");s()})};g.fn.parallax.defaults={direction:"vertical",swipeAnim:"default",drag:true,loading:false,indicator:false,arrow:false,onchange:function(){},orientationchange:function(){}};function s(){if(f.loading){g(".wrapper").append('<div class="parallax-loading"><i class="ui-loading ui-loading-white"></i></div>')}else{e=false}y="stay";n=a.length;x=g(window).width();l=g(window).height();c=g("[data-animation]");for(var A=0;A<n;A++){g(a[A]).attr("data-id",A+1)}b.addClass(f.direction).addClass(f.swipeAnim);a.css({width:x+"px",height:l+"px"});f.direction==="horizontal"?b.css("width",x*a.length):b.css("height",l*a.length);if(f.swipeAnim==="cover"){b.css({width:x,height:l});a[0].style.display="block"}if(!f.loading){g(a[curPage]).addClass("current");f.onchange(curPage,a[curPage],y);d()}if(f.arrow){a.append('<span class="parallax-arrow"></span>');g(a[n-1]).find(".parallax-arrow").remove()}}function u(A){if(e===true){event.preventDefault();return false}q=true;f.direction==="horizontal"?z=A.pageX:z=A.pageY;if(f.swipeAnim==="default"){b.addClass("drag");h=b.css("-webkit-transform").replace("matrix(","").replace(")","").split(",");f.direction==="horizontal"?h=parseInt(h[4]):h=parseInt(h[5])}if((f.swipeAnim==="cover"&&f.drag)){a.addClass("drag")}v=1}function k(A){if(e===true||q===false){event.preventDefault();return false}event.preventDefault();f.direction==="horizontal"?r=A.pageX:r=A.pageY;t();if(f.drag&&!o()){p()}else{if(o()){b.css("-webkit-transform","matrix(1, 0, 0, 1, "+h+", 0)")}}v=2}function j(A){if(e===true||v!==2){}else{q=false;f.direction==="horizontal"?r=A.pageX:r=A.pageY;if(f.swipeAnim==="default"&&!o()){b.removeClass("drag");if(Math.abs(r-z)<=50){m(curPage);y="stay"}else{if(r>=z){m(curPage-1);y="backward"}else{if(r<z){m(curPage+1);y="forward"}}}}else{if(f.swipeAnim==="cover"&&!o()){if(Math.abs(r-z)<=50&&r>=z&&f.drag){m(curPage,"keep-backward");y="stay"}else{if(Math.abs(r-z)<=50&&r<z&&f.drag){m(curPage,"keep-forward");y="stay"}else{if(Math.abs(r-z)>50&&r>=z&&f.drag){m(curPage-1,"backward");y="backward"}else{if(Math.abs(r-z)>50&&r<z&&f.drag){m(curPage+1,"forward");y="forward"}else{if(Math.abs(r-z)>50&&r>=z&&!f.drag){m(curPage-1,"backward");y="backward"}else{if(Math.abs(r-z)>50&&r<z&&!f.drag){m(curPage+1,"forward");y="forward"}}}}}}}}if(f.indicator){g(g(".parallax-h-indicator ul li, .parallax-v-indicator ul li").removeClass("current").get(curPage)).addClass("current")}v=3}}function p(){if(f.swipeAnim==="default"){var B=h+r-z;f.direction==="horizontal"?b.css("-webkit-transform","matrix(1, 0, 0, 1, "+B+", 0)"):b.css("-webkit-transform","matrix(1, 0, 0, 1, 0, "+B+")")}else{if(f.swipeAnim==="cover"){var B=r-z,A=g(a[curPage-1]),C=g(a[curPage+1]);g(a).css({"z-index":0});if(f.direction==="horizontal"&&r>=z){A.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(B-x)+"px)"})}else{if(f.direction==="horizontal"&&r<z){C.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(x+B)+"px)"})}else{if(f.direction==="vertical"&&r>=z){A.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(B-l)+"px)"})}else{if(f.direction==="vertical"&&r<z){C.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(l+B)+"px)"})}}}}}}}function m(A,B){curPage=A;if(f.swipeAnim==="default"){var C=0;f.direction==="horizontal"?C=A*(-x):C=A*(-l);f.direction==="horizontal"?b.css({"-webkit-transform":"matrix(1, 0, 0, 1, "+C+", 0)"}):b.css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, "+C+")"})}else{if(f.swipeAnim==="cover"){if(B==="keep-backward"&&f.drag){a.removeClass("drag");f.direction==="horizontal"?g(a[curPage-1]).css({"-webkit-transform":"translateX(-100%)"}):g(a[curPage-1]).css({"-webkit-transform":"translateY(-100%)"})}else{if(B==="keep-forward"&&f.drag){a.removeClass("drag");f.direction==="horizontal"?g(a[curPage+1]).css({"-webkit-transform":"translateX(100%)"}):g(a[curPage+1]).css({"-webkit-transform":"translateY(100%)"})}else{if(B==="forward"&&f.drag){a.removeClass("drag");g(a[curPage-1]).addClass("back");a[curPage].style.webkitTransform="translate(0, 0)"}else{if(B==="backward"&&f.drag){a.removeClass("drag");g(a[curPage+1]).addClass("back");a[curPage].style.webkitTransform="translate(0, 0)"}else{if(B==="forward"&&!f.drag){b.addClass("animate");g(a[curPage-1]).addClass("back");g(a[curPage]).addClass("front").show()}else{if(B==="backward"&&!f.drag){b.addClass("animate");g(a[curPage+1]).addClass("back");g(a[curPage]).addClass("front").show()}}}}}}}}e=true;setTimeout(function(){e=false},300)}function t(){if(f.direction==="horizontal"){if(r>=z){b.removeClass("forward").addClass("backward")}else{if(r<z){b.removeClass("backward").addClass("forward")}}}else{if(r>=z){b.removeClass("forward").addClass("backward")}else{if(r<z){b.removeClass("backward").addClass("forward")}}}}function o(){var A=g(".page").index(g(".page").not(function(){return g(this).hasClass("none")}).last());if(f.direction==="horizontal"){if((r>=z&&curPage===0)||(r<=z&&curPage===A)){return true}}else{if((r>=z&&curPage===0)||(r<=z&&curPage===A)){return true}}return false}function w(){return a.parent().hasClass("disabled")}function d(){c.css({"-webkit-animation":"none",display:"none"});g(".current [data-animation]").each(function(D,G){var B=g(G),F=B.attr("data-animation"),E=B.attr("data-duration")||500,C=B.attr("data-timing-function")||"ease",A=B.attr("data-delay")?B.attr("data-delay"):0;if(F==="followSlide"){if(f.direction==="horizontal"&&y==="forward"){F="followSlideToLeft"}else{if(f.direction==="horizontal"&&y==="backward"){F="followSlideToRight"}else{if(f.direction==="vertical"&&y==="forward"){F="followSlideToTop"}else{if(f.direction==="vertical"&&y==="backward"){F="followSlideToBottom"}}}}}B.css({display:"block","-webkit-animation-name":F,"-webkit-animation-duration":E+"ms","-webkit-animation-timing-function":"ease","-webkit-animation-timing-function":C,"-webkit-animation-delay":A+"ms","-webkit-animation-fill-mode":"both"})})}g(document).on("touchstart",".page",function(A){if(!w()){u(A.changedTouches[0])}}).on("touchmove",".page",function(A){if(!w()){k(A.changedTouches[0])}}).on("touchend",".page",function(A){if(!w()){j(A.changedTouches[0])}}).on("webkitAnimationEnd webkitTransitionEnd",".pages",function(){if(y!=="stay"){setTimeout(function(){g(".back").hide().removeClass("back");g(".front").show().removeClass("front");b.removeClass("forward backward animate")},10);a.length>0&&g(a.removeClass("current").get(curPage)).addClass("current");f.onchange(curPage,a[curPage],y);d()}});g(".page *").on("webkitAnimationEnd",function(){event.stopPropagation()});window.addEventListener("onorientationchange" in window?"orientationchange":"resize",function(){if(window.orientation===180||window.orientation===0){f.orientationchange("portrait")}if(window.orientation===90||window.orientation===-90){f.orientationchange("landscape")}},false)}(Zepto);(function(d,f){var r="",w,g,p,q={Webkit:"webkit",Moz:"",O:"o"},n=window.document,a=n.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,s,k,m,e,j,v,u,b,t={};function c(x){return x.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function h(x){return w?w+x:x.toLowerCase()}d.each(q,function(y,x){if(a.style[y+"TransitionProperty"]!==f){r="-"+y.toLowerCase()+"-";w=x;return false}});l=r+"transform";t[s=r+"transition-property"]=t[k=r+"transition-duration"]=t[e=r+"transition-delay"]=t[m=r+"transition-timing-function"]=t[j=r+"animation-name"]=t[v=r+"animation-duration"]=t[b=r+"animation-delay"]=t[u=r+"animation-timing-function"]="";d.fx={off:(w===f&&a.style.transitionProperty===f),speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")};d.fn.animate=function(y,z,A,B,x){if(d.isFunction(z)){B=z,A=f,z=f}if(d.isFunction(A)){B=A,A=f}if(d.isPlainObject(z)){A=z.easing,B=z.complete,x=z.delay,z=z.duration}if(z){z=(typeof z=="number"?z:(d.fx.speeds[z]||d.fx.speeds._default))/1000}if(x){x=parseFloat(x)/1000}return this.anim(y,z,A,B,x)};d.fn.anim=function(F,A,z,I,B){var G,D={},K,E="",C=this,y,J=d.fx.transitionEnd,x=false;if(A===f){A=d.fx.speeds._default/1000}if(B===f){B=0}if(d.fx.off){A=0}if(typeof F=="string"){D[j]=F;D[v]=A+"s";D[b]=B+"s";D[u]=(z||"linear");J=d.fx.animationEnd}else{K=[];for(G in F){if(o.test(G)){E+=G+"("+F[G]+") "}else{D[G]=F[G],K.push(c(G))}}if(E){D[l]=E,K.push(l)}if(A>0&&typeof F==="object"){D[s]=K.join(", ");D[k]=A+"s";D[e]=B+"s";D[m]=(z||"linear")}}y=function(L){if(typeof L!=="undefined"){if(L.target!==L.currentTarget){return}d(L.target).unbind(J,y)}else{d(this).unbind(J,y)}x=true;d(this).css(t);I&&I.call(this)};if(A>0){this.bind(J,y);setTimeout(function(){if(x){return}y.call(C)},(A*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(D);if(A<=0){setTimeout(function(){C.each(function(){y.call(this)})},0)}return this};a=null})(Zepto);(function(a){a.fn.coffee=function(k){var g=null;var h=null;var l="cubic-bezier(.09,.64,.16,.94)";var f=a(this);var b=a.extend({},a.fn.coffee.defaults,k);var j=b.steamWidth;var o=a('<div class="coffee-steam-box"></div>').css({height:b.steamHeight,width:b.steamWidth,left:60,top:-50,position:"absolute",overflow:"hidden","z-index":0}).appendTo(f);a.fn.coffee.stop=function(){clearInterval(g);clearInterval(h)};a.fn.coffee.start=function(){g=setInterval(function(){e()},n(b.steamInterval/2,b.steamInterval*2));h=setInterval(function(){d()},n(100,1000)+n(1000,3000))};return f;function e(){var x=n(8,b.steamMaxSize);var v=c(1,b.steamsFontFamily);var s="#"+c(6,"0123456789ABCDEF");var u=n(0,44);var t=n(-90,89);var r=m(0.4,1);var p=a.fx.cssPrefix+"transform";p=p+":rotate("+t+"deg) scale("+r+");";var w=a('<span class="coffee-steam">'+c(1,b.steams)+"</span>");var q=n(0,j-b.steamWidth-x);if(q>u){q=n(0,u)}w.css({position:"absolute",left:u,top:b.steamHeight,"font-size:":x+"px",color:s,"font-family":v,display:"block",opacity:1}).attr("style",w.attr("style")+p).appendTo(o).animate({top:n(b.steamHeight/2,0),left:q,opacity:0},n(b.steamFlyTime/2,b.steamFlyTime*1.2),l,function(){w.remove();w=null})}function d(){var p=n(-10,10);p+=parseInt(o.css("left"));if(p>=54){p=54}else{if(p<=34){p=34}}o.animate({left:p},n(1000,3000),l)}function c(s,r){s=s||1;var t="";var q=r.length-1;var p=0;for(i=0;i<s;i++){p=n(0,q-1);t+=r.slice(p,p+1)}return t}function n(q,s){var p=s-q;var r=q+Math.round(Math.random()*p);return parseInt(r)}function m(q,s){var p=s-q;var r=q+Math.random()*p;return parseFloat(r)}};a.fn.coffee.defaults={steams:["jQuery","HTML5","HTML6","CSS2","CSS3","JS","$.fn()","char","short","if","float","else","type","case","function","travel","return","array()","empty()","eval","C++","JAVA","PHP","JSP",".NET","while","this","$.find();","float","$.ajax()","addClass","width","height","Click","each","animate","cookie","bug","Design","Julying","$(this)","i++","Chrome","Firefox","Firebug","IE6","Guitar","Music","攻城师","旅行","王子墨","啤酒"],steamsFontFamily:["Verdana","Geneva","Comic Sans MS","MS Serif","Lucida Sans Unicode","Times New Roman","Trebuchet MS","Arial","Courier New","Georgia"],steamFlyTime:5000,steamInterval:500,steamMaxSize:30,steamHeight:200,steamWidth:300};a.fn.coffee.version="2.0.0"})(Zepto);(function(a){H.audio={$audio:a(".ui-audio"),$audio_btn:a(".audio-icon"),audio:null,audio_val:true,zlow:function(){this.$audio.addClass("zlow")},show:function(){this.$audio.removeClass("zlow none")},init:function(b){a("#coffee-flow").coffee({steams:["<img src='./images/audio_icon.png' />","<img src='./images/audio_icon.png' />"],steamHeight:150,steamWidth:44});var d={loop:false,preload:"auto",src:b,autoplay:true};this.audio=new Audio();for(var c in d){if(d.hasOwnProperty(c)&&(c in this.audio)){this.audio[c]=d[c]}}this.audio.load();a.fn.coffee.start();this.$audio_btn.addClass("animated")},event_handler:function(){var e=this;if(this.$audio.length==0){return}var c=e.$audio.find(".audio-txt"),d=null;e.$audio.find(".btn-audio").on("click",function(f){f.preventDefault();e.audio_contorl()});a(e.audio).on("play",function(){e.audio_val=false;b(c,true,d);e.$audio_btn.addClass("animated");a.fn.coffee.start();a(".coffee-steam-box").show(500)});a(e.audio).on("pause",function(){b(c,false,d);a.fn.coffee.stop();e.$audio_btn.removeClass("animated");a(".coffee-steam-box").hide(500)});function b(f,h,g){f.text(h?"打开":"关闭");if(g){clearTimeout(g)}f.removeClass("animated hide");g=setTimeout(function(){f.addClass("animated").addClass("hide")},1000)}},audio_contorl:function(){if(!this.audio_val){this.audio_stop()}else{this.audio_play()}},audio_play:function(){this.audio_val=false;if(this.audio){this.audio.play()}},audio_stop:function(){this.audio_val=true;if(this.audio){this.audio.pause()}}}})(Zepto);(function(c,a){function d(){this.hasDeviceMotion="ondevicemotion" in c;this.threshold=15;this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null;if(typeof a.CustomEvent==="function"){this.event=new a.CustomEvent("shake",{bubbles:true,cancelable:true})}else{if(typeof a.createEvent==="function"){this.event=a.createEvent("Event");this.event.initEvent("shake",true,true)}else{return false}}}d.prototype.reset=function(){this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null};d.prototype.start=function(){this.reset();if(this.hasDeviceMotion){c.addEventListener("devicemotion",this,false)}};d.prototype.stop=function(){if(this.hasDeviceMotion){c.removeEventListener("devicemotion",this,false)}this.reset()};d.prototype.devicemotion=function(l){var k=l.accelerationIncludingGravity,j,h,g=0,f=0,m=0;if((this.lastX===null)&&(this.lastY===null)&&(this.lastZ===null)){this.lastX=k.x;this.lastY=k.y;this.lastZ=k.z;return}g=Math.abs(this.lastX-k.x);f=Math.abs(this.lastY-k.y);m=Math.abs(this.lastZ-k.z);if(((g>this.threshold)&&(f>this.threshold))||((g>this.threshold)&&(m>this.threshold))||((f>this.threshold)&&(m>this.threshold))){j=new Date();h=j.getTime()-this.lastTime.getTime();if(h>1000){c.dispatchEvent(this.event);this.lastTime=new Date()}}this.lastX=k.x;this.lastY=k.y;this.lastZ=k.z};d.prototype.handleEvent=function(f){if(typeof(this[f.type])==="function"){return this[f.type](f)}};var b=new d();b&&b.start()}(window,document));(function(a){a.fn.scrollbox=function(b){var c={linear:false,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:true,onMouseOverPause:true,paused:false,queue:null,listElement:"ul",listItemElement:"li"};b=a.extend(c,b);b.scrollOffset=b.direction==="vertical"?"scrollTop":"scrollLeft";if(b.queue){b.queue=a("#"+b.queue)}return this.each(function(){var d=a(this),g,h=null,e=null,o=false,p,j,f,m,l,n,k;if(b.onMouseOverPause){d.bind("mouseover",function(){o=true});d.bind("mouseout",function(){o=false})}g=d.children(b.listElement+":first-child");m=function(){if(o){return}var t,r,s,q,u;t=g.children(b.listItemElement+":first-child");q=b.distance!=="auto"?b.distance:b.direction==="vertical"?t.height():t.width();if(!b.linear){u=Math.max(3,parseInt((q-d[0][b.scrollOffset])*0.3,10));s=Math.min(d[0][b.scrollOffset]+u,q)}else{s=Math.min(d[0][b.scrollOffset]+b.step,q)}d[0][b.scrollOffset]=s;if(s>=q){for(r=0;r<b.switchItems;r++){if(b.queue&&b.queue.find(b.listItemElement).length>0){g.append(b.queue.find(b.listItemElement)[0]);g.children(b.listItemElement+":first-child").remove()}else{g.append(g.children(b.listItemElement+":first-child"))}}d[0][b.scrollOffset]=0;clearInterval(h);if(b.autoPlay){e=setTimeout(j,b.delay*1000)}}};l=function(){if(o){return}var t,r,v,s,q,u;if(d[0][b.scrollOffset]===0){v=g.children(b.listItemElement).length;for(r=0;r<b.switchItems;r++){g.children(b.listItemElement+":last-child").insertBefore(g.children(b.listItemElement+":first-child"))}t=g.children(b.listItemElement+":first-child");q=b.distance!=="auto"?b.distance:b.direction==="vertical"?t.height():t.width();d[0][b.scrollOffset]=q}if(!b.linear){u=Math.max(3,parseInt(d[0][b.scrollOffset]*0.3,10));s=Math.max(d[0][b.scrollOffset]-u,0)}else{s=Math.max(d[0][b.scrollOffset]-b.step,0)}d[0][b.scrollOffset]=s;if(s===0){clearInterval(h);if(b.autoPlay){e=setTimeout(j,b.delay*1000)}}};j=function(){clearInterval(h);h=setInterval(m,b.speed)};n=function(){b.autoPlay=true;o=false;clearInterval(h);h=setInterval(m,b.speed)};k=function(){o=true};p=function(){clearInterval(h);h=setInterval(l,b.speed)};f=function(q){b.delay=q||b.delay;clearTimeout(e);if(b.autoPlay){e=setTimeout(j,b.delay*1000)}};if(b.autoPlay){e=setTimeout(j,b.startDelay*1000)}d.bind("resetClock",function(q){f(q)});d.bind("forward",function(){clearTimeout(e);j()});d.bind("pauseHover",function(){k()});d.bind("forwardHover",function(){n()});d.bind("backward",function(){clearTimeout(e);p()});d.bind("speedUp",function(q){if(typeof q==="undefined"){q=Math.max(1,parseInt(b.speed/2,10))}b.speed=q});d.bind("speedDown",function(q){if(typeof q==="undefined"){q=b.speed*2}b.speed=q});d.bind("updateConfig",function(r,q){b=a.extend(b,q)})})}}(Zepto));
/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function(d,a,c){var f=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(g){d.setTimeout(g,1000/60)};var b=(function(){var l={};var m=a.createElement("div").style;var j=(function(){var q=["t","webkitT","MozT","msT","OT"],o,p=0,n=q.length;for(;p<n;p++){o=q[p]+"ransform";if(o in m){return q[p].substr(0,q[p].length-1)}}return false})();function k(n){if(j===false){return false}if(j===""){return n}return j+n.charAt(0).toUpperCase()+n.substr(1)}l.getTime=Date.now||function g(){return new Date().getTime()};l.extend=function(p,o){for(var n in o){p[n]=o[n]}};l.addEvent=function(q,p,o,n){q.addEventListener(p,o,!!n)};l.removeEvent=function(q,p,o,n){q.removeEventListener(p,o,!!n)};l.prefixPointerEvent=function(n){return d.MSPointerEvent?"MSPointer"+n.charAt(9).toUpperCase()+n.substr(10):n};l.momentum=function(t,p,q,n,u,v){var o=t-p,r=c.abs(o)/q,w,s;v=v===undefined?0.0006:v;w=t+(r*r)/(2*v)*(o<0?-1:1);s=r/v;if(w<n){w=u?n-(u/2.5*(r/8)):n;o=c.abs(w-t);s=o/r}else{if(w>0){w=u?u/2.5*(r/8):0;o=c.abs(t)+w;s=o/r}}return{destination:c.round(w),duration:s}};var h=k("transform");l.extend(l,{hasTransform:h!==false,hasPerspective:k("perspective") in m,hasTouch:"ontouchstart" in d,hasPointer:d.PointerEvent||d.MSPointerEvent,hasTransition:k("transition") in m});l.isBadAndroid=/Android /.test(d.navigator.appVersion)&&!(/Chrome\/\d/.test(d.navigator.appVersion));l.extend(l.style={},{transform:h,transitionTimingFunction:k("transitionTimingFunction"),transitionDuration:k("transitionDuration"),transitionDelay:k("transitionDelay"),transformOrigin:k("transformOrigin")});l.hasClass=function(o,p){var n=new RegExp("(^|\\s)"+p+"(\\s|$)");return n.test(o.className)};l.addClass=function(o,p){if(l.hasClass(o,p)){return}var n=o.className.split(" ");n.push(p);o.className=n.join(" ")};l.removeClass=function(o,p){if(!l.hasClass(o,p)){return}var n=new RegExp("(^|\\s)"+p+"(\\s|$)","g");o.className=o.className.replace(n," ")};l.offset=function(n){var p=-n.offsetLeft,o=-n.offsetTop;while(n=n.offsetParent){p-=n.offsetLeft;o-=n.offsetTop}return{left:p,top:o}};l.preventDefaultException=function(p,o){for(var n in o){if(o[n].test(p[n])){return true}}return false};l.extend(l.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});l.extend(l.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return c.sqrt(1-(--n*n))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(o){var n=4;return(o=o-1)*o*((n+1)*o+n)+1}},bounce:{style:"",fn:function(n){if((n/=1)<(1/2.75)){return 7.5625*n*n}else{if(n<(2/2.75)){return 7.5625*(n-=(1.5/2.75))*n+0.75}else{if(n<(2.5/2.75)){return 7.5625*(n-=(2.25/2.75))*n+0.9375}else{return 7.5625*(n-=(2.625/2.75))*n+0.984375}}}}},elastic:{style:"",fn:function(n){var o=0.22,p=0.4;if(n===0){return 0}if(n==1){return 1}return(p*c.pow(2,-10*n)*c.sin((n-o/4)*(2*c.PI)/o)+1)}}});l.tap=function(p,n){var o=a.createEvent("Event");o.initEvent(n,true,true);o.pageX=p.pageX;o.pageY=p.pageY;p.target.dispatchEvent(o)};l.click=function(p){var o=p.target,n;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(o.tagName)){n=a.createEvent("MouseEvents");n.initMouseEvent("click",true,true,p.view,1,o.screenX,o.screenY,o.clientX,o.clientY,p.ctrlKey,p.altKey,p.shiftKey,p.metaKey,0,null);n._constructed=true;o.dispatchEvent(n)}};return l})();function e(j,g){this.wrapper=typeof j=="string"?a.querySelector(j):j;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var h in g){this.options[h]=g[h]}this.translateZ=this.options.HWCompositing&&b.hasPerspective?" translateZ(0)":"";this.options.useTransition=b.hasTransition&&this.options.useTransition;this.options.useTransform=b.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?b.ease[this.options.bounceEasing]||b.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}e.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(g){if(g.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(h){if(b.eventType[h.type]!=1){if(h.button!==0){return}}if(!this.enabled||(this.initiated&&b.eventType[h.type]!==this.initiated)){return}if(this.options.preventDefault&&!b.isBadAndroid&&!b.preventDefaultException(h.target,this.options.preventDefaultException)){h.preventDefault()}var g=h.touches?h.touches[0]:h,j;this.initiated=b.eventType[h.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=b.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;j=this.getComputedPosition();this._translate(c.round(j.x),c.round(j.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=g.pageX;this.pointY=g.pageY;this._execEvent("beforeScrollStart")},_move:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault){m.preventDefault()}var o=m.touches?m.touches[0]:m,j=o.pageX-this.pointX,h=o.pageY-this.pointY,n=b.getTime(),g,p,l,k;this.pointX=o.pageX;this.pointY=o.pageY;this.distX+=j;this.distY+=h;l=c.abs(this.distX);k=c.abs(this.distY);if(n-this.endTime>300&&(l<10&&k<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(l>k+this.options.directionLockThreshold){this.directionLocked="h"}else{if(k>=l+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){m.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}h=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){m.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}j=0}}j=this.hasHorizontalScroll?j:0;h=this.hasVerticalScroll?h:0;g=this.x+j;p=this.y+h;if(g>0||g<this.maxScrollX){g=this.options.bounce?this.x+j/3:g>0?0:this.maxScrollX}if(p>0||p<this.maxScrollY){p=this.options.bounce?this.y+h/3:p>0?0:this.maxScrollY}this.directionX=j>0?-1:j<0?1:0;this.directionY=h>0?-1:h<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(g,p);if(n-this.startTime>300){this.startTime=n;this.startX=this.x;this.startY=this.y}},_end:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault&&!b.preventDefaultException(m.target,this.options.preventDefaultException)){m.preventDefault()}var o=m.changedTouches?m.changedTouches[0]:m,j,h,l=b.getTime()-this.startTime,g=c.round(this.x),r=c.round(this.y),q=c.abs(g-this.startX),p=c.abs(r-this.startY),k=0,n="";this.isInTransition=0;this.initiated=0;this.endTime=b.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(g,r);if(!this.moved){if(this.options.tap){b.tap(m,this.options.tap)}if(this.options.click){b.click(m)}this._execEvent("scrollCancel");return}if(this._events.flick&&l<200&&q<100&&p<100){this._execEvent("flick");return}if(this.options.momentum&&l<300){j=this.hasHorizontalScroll?b.momentum(this.x,this.startX,l,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:g,duration:0};h=this.hasVerticalScroll?b.momentum(this.y,this.startY,l,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0};g=j.destination;r=h.destination;k=c.max(j.duration,h.duration);this.isInTransition=1}if(g!=this.x||r!=this.y){if(g>0||g<this.maxScrollX||r>0||r<this.maxScrollY){n=b.ease.quadratic}this.scrollTo(g,r,k,n);return}this._execEvent("scrollEnd")},_resize:function(){var g=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){g.refresh()},this.options.resizePolling)},resetPosition:function(h){var g=this.x,j=this.y;h=h||0;if(!this.hasHorizontalScroll||this.x>0){g=0}else{if(this.x<this.maxScrollX){g=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){j=0}else{if(this.y<this.maxScrollY){j=this.maxScrollY}}if(g==this.x&&j==this.y){return false}this.scrollTo(g,j,h,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var g=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=b.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(h,g){if(!this._events[h]){this._events[h]=[]}this._events[h].push(g)},off:function(j,h){if(!this._events[j]){return}var g=this._events[j].indexOf(h);if(g>-1){this._events[j].splice(g,1)}},_execEvent:function(j){if(!this._events[j]){return}var h=0,g=this._events[j].length;if(!g){return}for(;h<g;h++){this._events[j][h].apply(this,[].slice.call(arguments,1))}},scrollBy:function(g,k,h,j){g=this.x+g;k=this.y+k;h=h||0;this.scrollTo(g,k,h,j)},scrollTo:function(g,k,h,j){j=j||b.ease.circular;this.isInTransition=this.options.useTransition&&h>0;if(!h||(this.options.useTransition&&j.style)){this._transitionTimingFunction(j.style);this._transitionTime(h);this._translate(g,k)}else{this._animate(g,k,h,j.fn)}},scrollToElement:function(h,j,g,m,l){h=h.nodeType?h:this.scroller.querySelector(h);if(!h){return}var k=b.offset(h);k.left-=this.wrapperOffset.left;k.top-=this.wrapperOffset.top;if(g===true){g=c.round(h.offsetWidth/2-this.wrapper.offsetWidth/2)}if(m===true){m=c.round(h.offsetHeight/2-this.wrapper.offsetHeight/2)}k.left-=g||0;k.top-=m||0;k.left=k.left>0?0:k.left<this.maxScrollX?this.maxScrollX:k.left;k.top=k.top>0?0:k.top<this.maxScrollY?this.maxScrollY:k.top;j=j===undefined||j===null||j==="auto"?c.max(c.abs(this.x-k.left),c.abs(this.y-k.top)):j;this.scrollTo(k.left,k.top,j,l)},_transitionTime:function(g){g=g||0;this.scrollerStyle[b.style.transitionDuration]=g+"ms";if(!g&&b.isBadAndroid){this.scrollerStyle[b.style.transitionDuration]="0.001s"}},_transitionTimingFunction:function(g){this.scrollerStyle[b.style.transitionTimingFunction]=g},_translate:function(g,h){if(this.options.useTransform){this.scrollerStyle[b.style.transform]="translate("+g+"px,"+h+"px)"+this.translateZ}else{g=c.round(g);h=c.round(h);this.scrollerStyle.left=g+"px";this.scrollerStyle.top=h+"px"}this.x=g;this.y=h},_initEvents:function(g){var h=g?b.removeEvent:b.addEvent,j=this.options.bindToWrapper?this.wrapper:d;h(d,"orientationchange",this);h(d,"resize",this);if(this.options.click){h(this.wrapper,"click",this,true)}if(!this.options.disableMouse){h(this.wrapper,"mousedown",this);h(j,"mousemove",this);h(j,"mousecancel",this);h(j,"mouseup",this)}if(b.hasPointer&&!this.options.disablePointer){h(this.wrapper,b.prefixPointerEvent("pointerdown"),this);h(j,b.prefixPointerEvent("pointermove"),this);h(j,b.prefixPointerEvent("pointercancel"),this);h(j,b.prefixPointerEvent("pointerup"),this)}if(b.hasTouch&&!this.options.disableTouch){h(this.wrapper,"touchstart",this);h(j,"touchmove",this);h(j,"touchcancel",this);h(j,"touchend",this)}h(this.scroller,"transitionend",this);h(this.scroller,"webkitTransitionEnd",this);h(this.scroller,"oTransitionEnd",this);h(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var h=d.getComputedStyle(this.scroller,null),g,j;if(this.options.useTransform){h=h[b.style.transform].split(")")[0].split(", ");g=+(h[12]||h[4]);j=+(h[13]||h[5])}else{g=+h.left.replace(/[^-\d.]/g,"");j=+h.top.replace(/[^-\d.]/g,"")}return{x:g,y:j}},_animate:function(q,p,k,g){var n=this,m=this.x,l=this.y,h=b.getTime(),o=h+k;function j(){var r=b.getTime(),t,s,u;if(r>=o){n.isAnimating=false;n._translate(q,p);if(!n.resetPosition(n.options.bounceTime)){n._execEvent("scrollEnd")}return}r=(r-h)/k;u=g(r);t=(q-m)*u+m;s=(p-l)*u+l;n._translate(t,s);if(n.isAnimating){f(j)}}this.isAnimating=true;j()},handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(g);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(g);break;case"keydown":this._key(g);break;case"click":if(!g._constructed){g.preventDefault();g.stopPropagation()}break}}};e.utils=b;if(typeof module!="undefined"&&module.exports){module.exports=e}else{d.IScroll=e}})(window,document,Math);