(function(a){H.dialog={puid:0,$container:a("#main"),REQUEST_CLS:"requesting",iscroll:null,init:function(){var b=this;this.$container.delegate(".btn-rule","click",function(c){c.preventDefault();H.dialog.rule.open()}).delegate(".btn-close","click",function(c){c.preventDefault();a(this).closest(".modal").addClass("none")}).delegate(".btn-comeon","click",function(c){c.preventDefault();H.dialog.guide.open()})},close:function(){a(".modal").addClass("none")},open:function(){H.dialog.close();if(this.$dialog){this.$dialog.removeClass("none")}else{this.$dialog=a(this.tpl());H.dialog.$container.append(this.$dialog)}H.dialog.relocate()},relocate:function(){var b=a(window).height(),c=a(window).width(),d=a(window).scrollTop()+b*0.06;a(".modal").css({width:c,height:b}).find(".btn-close").css({right:c*0.1-15,top:d-15});a(".dialog").each(function(){if(a(this).hasClass("relocated")){return}a(this).css({width:c*0.8,height:b*0.88,left:c*0.1,right:c*0.1,top:d,bottom:b*0.1});var e=a(this).find(".box");if(e.length>0){e.css("height",b*0.38)}})},guide:{$dialog:null,open:function(){H.dialog.open.call(this);this.event();var b=this;setTimeout(function(){b.close()},8000)},event:function(){var b=this;this.$dialog.find(".btn-try").click(function(c){c.preventDefault();localStorage.guided=false;b.close()})},close:function(){this.$dialog&&this.$dialog.addClass("none")},tpl:function(){var b=simpleTpl();b._('<section class="modal modal-guide" id="guide-dialog">')._('<div class="dialog guide-dialog relocated">')._("<h2></h2>")._('<p class="ellipsis"><label class="fir"></label><span>打开电视，锁定安徽卫视</span></p>')._('<p class="ellipsis"><label class="sec"></label><span class="sec-span">打开微信，进入摇一摇(歌曲)</span></p>')._('<p class="ellipsis fina"><label class="thir"></label>摇动手机，即可参与栏目互动</p>')._('<a href="#" class="btn btn-try" data-collect="true" data-collect-flag="anhui-find-guide-trybtn" data-collect-desc="安徽电视台我要找到你引导弹层-关闭按钮">等下去试试</a>')._("</div>")._("</section>");return b.toString()}},rule:{$dialog:null,open:function(){H.dialog.open.call(this);this.event();getResult("party/quiz/index",{},"quizIndexHandler",true,this.$dialog)},close:function(){this.$dialog&&this.$dialog.addClass("none")},event:function(){var b=this;this.$dialog.find(".close").click(function(c){c.preventDefault();b.close()})},update:function(b){this.$dialog.find(".rule-con").html(b).closest(".content").removeClass("none")},tpl:function(){var b=simpleTpl();b._('<section class="modal modal-rul" id="rule-dialog">')._('<div class="dialog rule-dialog">')._("<h2>活动规则</h2>")._('<div class="content border">')._('<div class="rule-con"></div>')._("</div>")._('<p class="dialog-copyright"><a href="#" class="btn my-zhidao close" data-collect="true" data-collect-flag="anhui-find-guide-trybtn" data-collect-desc="安徽电视台我要找到你规则弹层-我知道了按钮">我知道了</a></p>')._("</div>")._("</section>");return b.toString()}}};W.quizIndexHandler=function(b){}})(Zepto);$(function(){H.dialog.init()});(function(a){H.index={from:getQueryString("from"),init:function(){var b=this;if(b.from){setTimeout(function(){H.dialog.guide.open()},800)}b.load_bg()},event_handler:function(){var b=this;a("#btn-rule").click(function(c){c.preventDefault();H.dialog.rule.open()})},load_bg:function(){imgReady(index_bg,function(){a("body").css("background-size",document.documentElement.clientWidth+"px "+document.documentElement.clientHeight+"px");a("body").css("background-image","url("+index_bg+")")})}}})(Zepto);$(function(){H.index.init()});