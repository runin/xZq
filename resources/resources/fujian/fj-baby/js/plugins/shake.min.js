(function(c,a){function d(){this.hasDeviceMotion="ondevicemotion" in c;this.threshold=5;this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null;if(typeof a.CustomEvent==="function"){this.event=new a.CustomEvent("shake",{bubbles:true,cancelable:true})}else{if(typeof a.createEvent==="function"){this.event=a.createEvent("Event");this.event.initEvent("shake",true,true)}else{return false}}}d.prototype.reset=function(){this.lastTime=new Date();this.lastX=null;this.lastY=null;this.lastZ=null};d.prototype.start=function(){this.reset();if(this.hasDeviceMotion){c.addEventListener("devicemotion",this,false)}};d.prototype.stop=function(){if(this.hasDeviceMotion){c.removeEventListener("devicemotion",this,false)}this.reset()};d.prototype.devicemotion=function(k){var j=k.accelerationIncludingGravity,i,h,g=0,f=0,l=0;if((this.lastX===null)&&(this.lastY===null)&&(this.lastZ===null)){this.lastX=j.x;this.lastY=j.y;this.lastZ=j.z;return}g=Math.abs(this.lastX-j.x);f=Math.abs(this.lastY-j.y);l=Math.abs(this.lastZ-j.z);if(((g>this.threshold)&&(f>this.threshold))||((g>this.threshold)&&(l>this.threshold))||((f>this.threshold)&&(l>this.threshold))){i=new Date();h=i.getTime()-this.lastTime.getTime();if(h>1000){c.dispatchEvent(this.event);this.lastTime=new Date()}}this.lastX=j.x;this.lastY=j.y;this.lastZ=j.z};d.prototype.handleEvent=function(f){if(typeof(this[f.type])==="function"){return this[f.type](f)}};var b=new d();b&&b.start()}(window,document));