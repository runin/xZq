function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)))}function hex_hmac_md5(a,b){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),8*a.length))}function rstr_hmac_md5(a,b){var c=rstr2binl(a);c.length>16&&(c=binl_md5(c,8*a.length));for(var d=Array(16),e=Array(16),f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=binl_md5(d.concat(rstr2binl(b)),512+8*b.length);return binl2rstr(binl_md5(e.concat(g),640))}function rstr2hex(a){try{}catch(b){hexcase=0}for(var c,d=hexcase?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(c>>>4&15)+d.charAt(15&c);return e}function str2rstr_utf8(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d}function rstr2binl(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b}function binl2rstr(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b}function binl_md5(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=md5_ff(c,d,e,f,a[g+0],7,-680876936),f=md5_ff(f,c,d,e,a[g+1],12,-389564586),e=md5_ff(e,f,c,d,a[g+2],17,606105819),d=md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=md5_ff(c,d,e,f,a[g+4],7,-176418897),f=md5_ff(f,c,d,e,a[g+5],12,1200080426),e=md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=md5_ff(d,e,f,c,a[g+7],22,-45705983),c=md5_ff(c,d,e,f,a[g+8],7,1770035416),f=md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=md5_ff(e,f,c,d,a[g+10],17,-42063),d=md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=md5_ff(c,d,e,f,a[g+12],7,1804603682),f=md5_ff(f,c,d,e,a[g+13],12,-40341101),e=md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=md5_ff(d,e,f,c,a[g+15],22,1236535329),c=md5_gg(c,d,e,f,a[g+1],5,-165796510),f=md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=md5_gg(e,f,c,d,a[g+11],14,643717713),d=md5_gg(d,e,f,c,a[g+0],20,-373897302),c=md5_gg(c,d,e,f,a[g+5],5,-701558691),f=md5_gg(f,c,d,e,a[g+10],9,38016083),e=md5_gg(e,f,c,d,a[g+15],14,-660478335),d=md5_gg(d,e,f,c,a[g+4],20,-405537848),c=md5_gg(c,d,e,f,a[g+9],5,568446438),f=md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=md5_gg(e,f,c,d,a[g+3],14,-187363961),d=md5_gg(d,e,f,c,a[g+8],20,1163531501),c=md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=md5_gg(f,c,d,e,a[g+2],9,-51403784),e=md5_gg(e,f,c,d,a[g+7],14,1735328473),d=md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=md5_hh(c,d,e,f,a[g+5],4,-378558),f=md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=md5_hh(e,f,c,d,a[g+11],16,1839030562),d=md5_hh(d,e,f,c,a[g+14],23,-35309556),c=md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=md5_hh(f,c,d,e,a[g+4],11,1272893353),e=md5_hh(e,f,c,d,a[g+7],16,-155497632),d=md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=md5_hh(c,d,e,f,a[g+13],4,681279174),f=md5_hh(f,c,d,e,a[g+0],11,-358537222),e=md5_hh(e,f,c,d,a[g+3],16,-722521979),d=md5_hh(d,e,f,c,a[g+6],23,76029189),c=md5_hh(c,d,e,f,a[g+9],4,-640364487),f=md5_hh(f,c,d,e,a[g+12],11,-421815835),e=md5_hh(e,f,c,d,a[g+15],16,530742520),d=md5_hh(d,e,f,c,a[g+2],23,-995338651),c=md5_ii(c,d,e,f,a[g+0],6,-198630844),f=md5_ii(f,c,d,e,a[g+7],10,1126891415),e=md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=md5_ii(d,e,f,c,a[g+5],21,-57434055),c=md5_ii(c,d,e,f,a[g+12],6,1700485571),f=md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=md5_ii(e,f,c,d,a[g+10],15,-1051523),d=md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=md5_ii(c,d,e,f,a[g+8],6,1873313359),f=md5_ii(f,c,d,e,a[g+15],10,-30611744),e=md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=md5_ii(d,e,f,c,a[g+13],21,1309151649),c=md5_ii(c,d,e,f,a[g+4],6,-145523070),f=md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=md5_ii(e,f,c,d,a[g+2],15,718787259),d=md5_ii(d,e,f,c,a[g+9],21,-343485551),c=safe_add(c,h),d=safe_add(d,i),e=safe_add(e,j),f=safe_add(f,k)}return Array(c,d,e,f)}function md5_cmn(a,b,c,d,e,f){return safe_add(bit_rol(safe_add(safe_add(b,a),safe_add(d,f)),e),c)}function md5_ff(a,b,c,d,e,f,g){return md5_cmn(b&c|~b&d,a,b,e,f,g)}function md5_gg(a,b,c,d,e,f,g){return md5_cmn(b&d|c&~d,a,b,e,f,g)}function md5_hh(a,b,c,d,e,f,g){return md5_cmn(b^c^d,a,b,e,f,g)}function md5_ii(a,b,c,d,e,f,g){return md5_cmn(c^(b|~d),a,b,e,f,g)}function safe_add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function bit_rol(a,b){return a<<b|a>>>32-b}function recordUserPage(a,b,c){recordUserLog(a,b,"",c,"true")}var hexcase=0;!function(a){"use strict";var b={version:3.5};a.WeixinApi=b,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return b}):define.cmd&&define(function(a,c,d){d.exports=b}));var c=function(){for(var a,b,c={},d=0,e=arguments.length;e>d;d++)if(a=arguments[d],"object"==typeof a)for(b in a)a[b]&&(c[b]=a[b]);return c},d=function(a,d,e){e=e||{};var f=function(a){switch(!0){case/\:cancel$/i.test(a.err_msg):e.cancel&&e.cancel(a);break;case/\:(confirm|ok)$/i.test(a.err_msg):e.confirm&&e.confirm(a);break;case/\:fail$/i.test(a.err_msg):default:e.fail&&e.fail(a)}e.all&&e.all(a)},g=function(b,c){if("menu:share:timeline"==a.menu||"menu:general:share"==a.menu&&"timeline"==c.shareTo){var d=/android/i.test(navigator.userAgent);if(!d){var g=b.title;b.title=b.desc||g,b.desc=g||b.desc}}if("menu:general:share"===a.menu){if(("favorite"==c.shareTo||"favorite"==c.scene)&&e.favorite===!1)return c.generalShare(b,function(){});c.generalShare(b,f)}else WeixinJSBridge.invoke(a.action,b,f)};WeixinJSBridge.on(a.menu,function(a){if(e.dataLoaded=e.dataLoaded||new Function,e.async&&e.ready)b._wx_loadedCb_=e.dataLoaded,b._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(b._wx_loadedCb_=new Function),e.dataLoaded=function(f){e.__cbkCalled=!0;var h=c(d,f);h.img_url=h.imgUrl||h.img_url,delete h.imgUrl,b._wx_loadedCb_(h),g(h,a)},(!a||"favorite"!=a.shareTo&&"favorite"!=a.scene||e.favorite!==!1)&&(e.ready&&e.ready(a,d),e.__cbkCalled||(e.dataLoaded({}),e.__cbkCalled=!1));else{var f=c(d);(!a||"favorite"!=a.shareTo&&"favorite"!=a.scene||e.favorite!==!1)&&e.ready&&e.ready(a,f),g(f,a)}})};b.shareToTimeline=function(a,b){d({menu:"menu:share:timeline",action:"shareTimeline"},{appid:a.appId?a.appId:"",img_url:a.imgUrl,link:a.link,desc:a.desc,title:a.title,img_width:"640",img_height:"640"},b)},b.shareToFriend=function(a,b){d({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:a.appId?a.appId:"",img_url:a.imgUrl,link:a.link,desc:a.desc,title:a.title,img_width:"640",img_height:"640"},b)},b.generalShare=function(a,b){d({menu:"menu:general:share"},{appid:a.appId?a.appId:"",img_url:a.imgUrl,link:a.link,desc:a.desc,title:a.title,img_width:"640",img_height:"640"},b)},b.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu")},b.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu")},b.showToolbar=function(){WeixinJSBridge.call("showToolbar")},b.hideToolbar=function(){WeixinJSBridge.call("hideToolbar")},b.ready=function(b){if(b&&"function"==typeof b){var c=this,d=function(){b(c)};"undefined"==typeof a.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",d,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",d),document.attachEvent("onWeixinJSBridgeReady",d)):d()}},b.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},b.enableDebugMode=function(b){a.onerror=function(a,c,d,e){if("function"==typeof b)b({message:a,script:c,line:d,column:e});else{var f=[];f.push("额，代码有错。。。"),f.push("\n错误信息：",a),f.push("\n出错文件：",c),f.push("\n出错位置：",d+"行，"+e+"列")}}}}(window),function(a){a.yao_scope="userinfo",a.openid=$.fn.cookie(mpappid+"_openid"),a.headimgurl=$.fn.cookie(mpappid+"_headimgurl"),a.nickname=$.fn.cookie(mpappid+"_nickname"),a.expires_in={expires:30},a.Authorize=function(a){this.mpappid=a&&a.mpappid||mpappid,this.serviceNo=a&&a.serviceNo||serviceNo,this.scope="snsapi_userinfo",this.redirect_uri=domain_url+"api/mp/auth/snsapi_userinfo",this.jumpUrl=""},Authorize.prototype.authorize=function(a){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.mpappid+"&redirect_uri="+encodeURIComponent(this.redirect_uri)+"&response_type=code&scope="+this.scope+"&state="+this.serviceNo+"#wechat_redirect "},Authorize.prototype.checkIsAuthorize=function(){return $.fn.cookie(mpappid+"_openid")?!0:!1},Authorize.prototype.getQueryParam=function(a){var b=decodeURIComponent(location.search.slice(1));if(""!=b){for(var c,d=b.split("&"),e=0,f=d.length;f>e;e++)if(c=d[e].split("="),c[0]===a)return c[1];return""}return""},Authorize.prototype.jumpToUrl=function(){this.jumpUrl&&(window.location.href=this.jumpUrl)},Authorize.prototype.init=function(){var a=this;openid?$.fn.cookie(mpappid+"_openid",openid,expires_in):(openid=a.getQueryParam("openid"),openid&&$.fn.cookie(mpappid+"_openid",openid,expires_in),openid||a.authorize(function(){})),headimgurl?$.fn.cookie(mpappid+"_headimgurl",headimgurl,expires_in):(headimgurl=a.getQueryParam("headimgurl"),headimgurl&&$.fn.cookie(mpappid+"_headimgurl",headimgurl,expires_in)),nickname?$.fn.cookie(mpappid+"_nickname",nickname,expires_in):(nickname=a.getQueryParam("nickname"),nickname&&$.fn.cookie(mpappid+"_nickname",nickname,expires_in))},(new Authorize).init()}(window);var __ns=function(fullNs){for(var nsArray=fullNs.split("."),evalStr="",ns="",i=0,l=nsArray.length;l>i;i++)0!==i&&(ns+="."),ns+=nsArray[i],evalStr+="( typeof "+ns+' === "undefined" && ('+ns+" = {}) );";""!==evalStr&&eval(evalStr)},__noop=function(){},W=W||window;__ns("H");var recordUserLog=function(a,b,c,d,e){$.ajax({type:"get",async:!1,url:domain_url+"userlog",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackDataHandler",data:{openId:a,operateDesc:encodeURIComponent(b),operateDomId:c,loadingTime:d,from:gefrom,flag:e}})},recordUserOperate=function(a,b,c){recordUserLog(a,b,c,"","false")},callbackUserSaveHandler=function(a){},getQueryString=function(a){var b=decodeURIComponent(location.search.slice(1));if(""!=b){for(var c,d=b.split("&"),e=0,f=d.length;f>e;e++)if(c=d[e].split("="),c[0]===a)return c[1];return""}return""},from=getQueryString("from"),gefrom=from||getQueryString("gefrom"),getResult=function(a,b,c,d,e,f){d&&showLoading(e),$.ajax({type:"GET",async:"undefined"==typeof f?!1:f,url:domain_url+a,data:b,dataType:"jsonp",jsonp:c,complete:function(){d&&hideLoading(e)},success:function(a){}})},simpleTpl=function(a){return a=$.isArray(a)?a.join(""):a||"",{store:a,_:function(){var a=this;return $.each(arguments,function(b,c){a.store+=c}),this},toString:function(){return this.store}}},share=function(a){var b=simpleTpl(),c=$("#share-box");0==c.length?(b._('<div class="share-box" id="share-box"></div>'),c=$(b.toString()),c.click(function(a){$(this).hide()}),$("body").append(c)):c.show()},str2date=function(a){return a=a.replace(/-/g,"/"),new Date(a)},timestamp=function(a){return Date.parse(str2date(a))},dateformat=function(date,format){var z={M:date.getMonth()+1,d:date.getDate(),h:date.getHours(),m:date.getMinutes(),s:date.getSeconds()};return format=format.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)}),format.replace(/(y+)/g,function(a){return date.getFullYear().toString().slice(-a.length)})},dateNum=function(a){return 10>a?"0"+a:a},showLoading=function(a){var b=simpleTpl(),a=a||$("body"),c=a?a.find(".spinner"):$("body").children(".spinner");if(c.length>0)c.show();else{b._('<div class="spinner">')._('<div class="spinner-wrapper">')._('<div class="spinner-container container1">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container2">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._('<div class="spinner-container container3">')._('<div class="circle1"></div>')._('<div class="circle2"></div>')._('<div class="circle3"></div>')._('<div class="circle4"></div>')._("</div>")._("</div>")._("</div>");var d=$(window).width(),e=$(window).height(),f=50;c=$(b.toString()).css({left:(d-f)/2,top:(e-f)/2}),a.append(c)}},hideLoading=function(a){a?a.find(".spinner").hide():$("body").children(".spinner").hide(),$(".copyright").removeClass("hidden")},imgReady=function(){var a=[],b=null,c=function(){for(var b=0;b<a.length;b++)a[b].end?a.splice(b--,1):a[b]();!a.length&&d()},d=function(){clearInterval(b),b=null};return function(d,e,f,g){var h,i,j,k,l,m=new Image;return m.src=d,m.complete?(e.call(m),void(f&&f.call(m))):(i=m.width,j=m.height,m.onerror=function(){g&&g.call(m),h.end=!0,m=m.onload=m.onerror=null},h=function(){k=m.width,l=m.height,(k!==i||l!==j||k*l>1024)&&(e.call(m),h.end=!0)},h(),m.onload=function(){!h.end&&h(),f&&f.call(m),m=m.onload=m.onerror=null},void(h.end||(a.push(h),null===b&&(b=setInterval(c,40)))))}}(),add_param=function(a,b,c,d){(null==a||0==a.length)&&(a=document.location.href);var e=a.split("?"),f="";if(e.length>1)for(var g=e[1].split("&"),h=0;h<g.length;h++){var i=g[h].split("=");d&&i[0]==b||(""==f?f="?":f+="&",f+=i[0]+"="+i[1])}return null!==c&&(""==f?f="?":f+="&",f+=b+"="+c),e[0]+f},add_yao_prefix=function(a){return"http://yao.qq.com/tv/entry?redirect_uri="+encodeURIComponent(a)},is_android=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("android")>-1};!function(a){a.fn.progress=function(b){var c={eAttr:"data-etime",sAttr:"data-stime",stpl:"%H%:%M%:%S%",wTime:500,cTime:(new Date).getTime(),callback:null},d=a.extend(c,b);window.progressTimeInterval=0;var e=a(this),f=(a(window).width(),function(){d.cTime+=d.wTime,e.each(function(){var b=a(this),c=parseInt(b.attr(d.sAttr)),e=parseInt(b.attr(d.eAttr)),f=(parseInt(b.attr(d.pAttr)),isNaN(c)?0:c-d.cTime),g=isNaN(e)?0:e-d.cTime,h=function(a,c){var e=Math.round(a%6e4/d.wTime);e=dateNum(Math.min(Math.floor(e/1e3*d.wTime),59));var f=dateNum(Math.floor(a%36e5/6e4)),g=dateNum(Math.floor(a%864e5/36e5)),h=dateNum(Math.floor(a/864e5));b.attr("data-timestr",c.replace(/%S%/,e).replace(/%M%/,f).replace(/%H%/,g).replace(/%D%/,h))},i=0;f>0?(i=1,h(f,d.stpl)):i=g>0?2:3,d.callback&&d.callback(i)})});f(),window.progressTimeInterval=setInterval(function(){f()},d.wTime)}}(Zepto);var getUrl=function(){var a=window.location.href;return a=a.replace(/[^\/]*\.html.*/i,"index.html"),a=add_param(a,"resopenid",hex_md5(openid),!0),a=add_param(a,"from","share",!0),add_yao_prefix(a)};$(function(){$("script").each(function(a,b){var c=$(this).attr("src");$(this).attr("src",c+"?v="+version)}),$("link").each(function(a,b){$(this).attr("href")});var a=$(window).height(),b=$(".main").attr("data-margin")||50;$(".main").css("minHeight",a-b),$.ajax({type:"get",async:!1,url:domain_url+"version/check",dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackVersionHandler",success:function(a){a.result||(location.href=a.redirect),share_img=a.si,share_title=a.st,share_desc=a.sd,share_group=a.sgt,window.shaketv&&shaketv.wxShare(share_img,share_title,share_desc,getUrl()),shaketv.subscribe({appid:"wxca9de9df38b0951e",selector:"#div_subscribe_area",type:2},function(a){})},error:function(){}}),recordUserPage(openid,$("title").html(),""),$("body").delegate("*[data-collect='true']","click",function(a){a.preventDefault(),"true"==$(this).attr("data-stoppropagation")&&a.stopPropagation(),recordUserOperate(openid,$(this).attr("data-collect-desc"),$(this).attr("data-collect-flag"));var b=$(this).attr("href");b&&"#"!==b&&(gefrom&&(b=add_param(b,"gefrom",gefrom,!0)),setTimeout(function(){window.location.href=b},5))})});